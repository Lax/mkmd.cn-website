<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head profile="http://gmpg.org/xfn/11">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />

	<title>Erlang内存分配器之mbcs_pool | 系统技术非业余研究</title>
	<link rel="alternate" type="application/rss+xml" title="RSS 2.0 - all posts" href="http://blog.yufeng.info/feed" />
	<link rel="alternate" type="application/rss+xml" title="RSS 2.0 - all comments" href="http://blog.yufeng.info/comments/feed" />
	<link rel="pingback" href="http://blog.yufeng.info/xmlrpc.php" />

	<!-- style START -->
	<!-- default style -->
	<style type="text/css" media="screen">@import url( http://blog.yufeng.info/wp-content/themes/inove/style.css );</style>
	<!-- for translations -->
		<!--[if IE]>
		<link rel="stylesheet" href="http://blog.yufeng.info/wp-content/themes/inove/ie.css" type="text/css" media="screen" />
	<![endif]-->
	<!-- style END -->

	<!-- script START -->
	<script type="text/javascript" src="http://blog.yufeng.info/wp-content/themes/inove/js/base.js"></script>
	<script type="text/javascript" src="http://blog.yufeng.info/wp-content/themes/inove/js/menu.js"></script>
	<!-- script END -->

	<link rel="alternate" type="application/rss+xml" title="系统技术非业余研究 &raquo; Erlang内存分配器之mbcs_pool Comments Feed" href="http://blog.yufeng.info/archives/3118/feed" />
<link rel='stylesheet' id='yarppWidgetCss-css'  href='http://blog.yufeng.info/wp-content/plugins/yet-another-related-posts-plugin/style/widget.css?ver=4.0' type='text/css' media='all' />
<link rel='stylesheet' id='jetpack-subscriptions-css'  href='http://blog.yufeng.info/wp-content/plugins/jetpack/modules/subscriptions/subscriptions.css?ver=4.0' type='text/css' media='all' />
<link rel='stylesheet' id='wp-syntax-css-css'  href='http://blog.yufeng.info/wp-content/themes/inove/wp-syntax.css?ver=1.0' type='text/css' media='all' />
<link rel='stylesheet' id='jetpack-widgets-css'  href='http://blog.yufeng.info/wp-content/plugins/jetpack/modules/widgets/widgets.css?ver=20121003' type='text/css' media='all' />
<!-- This site uses the Yoast Google Analytics plugin v5.0.7 - Universal disabled - https://yoast.com/wordpress/plugins/google-analytics/ -->
<script type="text/javascript">

	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-6788139-3']);
	_gaq.push(['_gat._forceSSL']);
	_gaq.push(['_trackPageview']);

	(function () {
		var ga = document.createElement('script');
		ga.type = 'text/javascript';
		ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0];
		s.parentNode.insertBefore(ga, s);
	})();

</script>
<!-- / Yoast Google Analytics -->
<script type='text/javascript' src='http://blog.yufeng.info/wp-includes/js/jquery/jquery.js?ver=1.11.1'></script>
<script type='text/javascript' src='http://blog.yufeng.info/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.2.1'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://blog.yufeng.info/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://blog.yufeng.info/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='基于LLVM的高性能Erlang(Hipe)尝鲜' href='http://blog.yufeng.info/archives/3104' />
<link rel='next' title='Erlang公平调度的误解' href='http://blog.yufeng.info/archives/3130' />
<meta name="generator" content="WordPress 4.0" />
<link rel='shortlink' href='http://wp.me/p1sdcD-Oi' />

<script type='text/javascript'>
var g_hanaFlash = false;
try {
  var fo = new ActiveXObject('ShockwaveFlash.ShockwaveFlash');
  if(fo) g_hanaFlash = true;
}catch(e){
  if(navigator.mimeTypes ['application/x-shockwave-flash'] != undefined) g_hanaFlash = true;
}
function hanaTrackEvents(arg1,arg2,arg3,arg4) { if ( typeof( pageTracker ) !=='undefined') { pageTracker._trackEvent(arg1, arg2, arg3, arg4);} else if ( typeof(_gaq) !=='undefined'){  _gaq.push(['_trackEvent', arg1, arg2, arg3, arg4]);}}
function hana_check_mobile_device(){ if(navigator.userAgent.match(/iPhone/i) || navigator.userAgent.match(/iPod/i) || navigator.userAgent.match(/iPad/i)  || navigator.userAgent.match(/Android/i)) { return true; }else return false; }
</script>
<style type="text/css">
.sfs-subscriber-count { width: 88px; overflow: hidden; height: 26px; color: #424242; font: 9px Verdana, Geneva, sans-serif; letter-spacing: 1px; }
.sfs-count { width: 86px; height: 17px; line-height: 17px; margin: 0 auto; background: #ccc; border: 1px solid #909090; border-top-color: #fff; border-left-color: #fff; }
.sfs-count span { display: inline-block; height: 11px; line-height: 12px; margin: 2px 1px 2px 2px; padding: 0 2px 0 3px; background: #e4e4e4; border: 1px solid #a2a2a2; border-bottom-color: #fff; border-right-color: #fff; }
.sfs-stats { font-size: 6px; line-height: 6px; margin: 1px 0 0 1px; word-spacing: 2px; text-align: center; text-transform: uppercase; }
</style>
	<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>

<!-- All in One SEO Pack 2.2.3.1 by Michael Torbert of Semper Fi Web Design[326,372] -->
<link rel="author" href="https://plus.google.com/113696493914077990187" />
<meta name="description"  content="Erlang R17.0 发布的release note 里面花了挺多笔墨讲了内存carrier迁移的特性： Support for migration of memory carriers between memory allocator instances has been introduced. By" />

<meta name="keywords"  content="acul,mbcs,pool,r17,erlang探索" />

<link rel="canonical" href="http://blog.yufeng.info/archives/3118" />
		<script type="text/javascript">
		  var _gaq = _gaq || [];
		  _gaq.push(['_setAccount', 'UA-6788139-3']);
		  _gaq.push(['_setAllowLinker', true]);
		  _gaq.push(['_trackPageview']);
		  (function() {
		    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		  })();
		</script>
		<script type="text/javascript">
		function recordOutboundLink(link, category, action) {
					_gat._getTrackerByName()._trackEvent(category, action);
					if ( link.target == '_blank' ) return true;
			setTimeout('document.location = "' + link.href + '"', 100);
			return false;
		}
			/* use regular Javascript for this */
			function getAttr(ele, attr) {
				var result = (ele.getAttribute && ele.getAttribute(attr)) || null;
				if( !result ) {
					var attrs = ele.attributes;
					var length = attrs.length;
					for(var i = 0; i < length; i++)
					if(attr[i].nodeName === attr) result = attr[i].nodeValue;
				}
				return result;
			}
			function aiosp_addLoadEvent(func) {
			  var oldonload = window.onload;
			  if (typeof window.onload != 'function') {
			    window.onload = func;
			  } else {
			    window.onload = function() {
			      if (oldonload) {
			        oldonload();
			      }
			      func();
			    }
			  }
			}
			
			function aiosp_addEvent(element, evnt, funct){
			  if (element.attachEvent)
			   return element.attachEvent('on'+evnt, funct);
			  else
			   return element.addEventListener(evnt, funct, false);
			}

			aiosp_addLoadEvent(function () {
				var links = document.getElementsByTagName('a');
				for (var x=0; x < links.length; x++) {
					if (typeof links[x] == 'undefined') continue;
					aiosp_addEvent( links[x], 'onclick', function () {
						var mydomain = new RegExp(document.domain, 'i');
						href = getAttr(this, 'href');
						if (href && href.toLowerCase().indexOf('http') === 0 && !mydomain.test(href)) {
							recordOutboundLink(this, 'Outbound Links', href);
						}
					});
				}
			});
		</script>
<!-- /all in one seo pack -->

<!-- Jetpack Open Graph Tags -->
<meta property="og:type" content="article" />
<meta property="og:title" content="Erlang内存分配器之mbcs_pool" />
<meta property="og:url" content="http://blog.yufeng.info/archives/3118" />
<meta property="og:description" content="Erlang R17.0 发布的release note 里面花了挺多笔墨讲了内存carrier迁移的特性： Support for migration of memory carriers between memory allocator instances has been introduced. By default this feature is not enabled and do..." />
<meta property="article:published_time" content="2014-04-27T05:06:46+00:00" />
<meta property="article:modified_time" content="2014-04-27T05:51:22+00:00" />
<meta property="article:author" content="http://blog.yufeng.info/archives/author/admin" />
<meta property="og:site_name" content="系统技术非业余研究" />
<meta property="og:image" content="http://blog.yufeng.info/wp-content/uploads/2014/04/allocators-1.png" />
<meta property="og:image" content="http://blog.yufeng.info/wp-content/uploads/2014/04/mbcs_pool_acul.png" />
<meta name="twitter:site" content="@jetpack" />
<meta name="twitter:image" content="http://blog.yufeng.info/wp-content/uploads/2014/04/allocators-1.png?w=240" />
<meta name="twitter:card" content="summary" />
<style type="text/css" id="syntaxhighlighteranchor"></style>
<!-- wp thread comment 1.4.9.4.002 -->
<style type="text/css" media="screen">

.editComment, .editableComment, .textComment{
	display: inline;
}
.comment-childs{
	border: 1px solid #999;
	margin: 5px 2px 2px 4px;
	padding: 4px 2px 2px 4px;
	background-color: white;
}
.chalt{
	background-color: #E2E2E2;
}
#newcomment{
	border:1px dashed #777;width:90%;
}
#newcommentsubmit{
	color:red;
}
.adminreplycomment{
	border:1px dashed #777;
	width:99%;
	margin:4px;
	padding:4px;
}
.mvccls{
	color: #999;
}
			
</style>
</head>


<body>                                                                                                                                                                                                                                                                                                                                                                                                                <!-- wrap START -->
<div id="wrap">

<!-- container START -->
<div id="container"  >

<!-- header START -->
<div id="header">

	<!-- banner START -->
			<div class="banner">
			捐赠：<a href="https://me.alipay.com/mryufeng">喜欢就请我喝一杯</a> 		</div>
		<!-- banner END -->

	<div id="caption">
		<h1 id="title"><a href="http://blog.yufeng.info/">系统技术非业余研究</a></h1>
		<div id="tagline">系统技术深度探索和应用</div>
	</div>

	<div class="fixed"></div>
</div>
<!-- header END -->

<!-- navigation START -->
<div id="navigation">
	<!-- menus START -->
	<ul id="menus">
		<li class="page_item"><a class="home" title="Home" href="http://blog.yufeng.info/">Home</a></li>
		<li class="page_item page-item-591"><a href="http://blog.yufeng.info/job">推荐工作机会</a></li>
<li class="page_item page-item-122"><a href="http://blog.yufeng.info/ppt">资料下载</a></li>
<li class="page_item page-item-65"><a href="http://blog.yufeng.info/%e7%95%99%e8%a8%80%e6%9d%bf">留言板</a></li>
<li class="page_item page-item-2"><a href="http://blog.yufeng.info/about">关于我</a></li>
		<li><a class="lastmenu" href="javascript:void(0);"></a></li>
	</ul>
	<!-- menus END -->

	<!-- searchbox START -->
	<div id="searchbox">
					<form action="http://www.google.com/cse" method="get">
				<div class="content">
					<input type="text" class="textfield" name="q" size="24" />
					<input type="submit" class="button" name="sa" value="" />
					<input type="hidden" name="cx" value="011994216034381653247:b54vq7hrjse" />
					<input type="hidden" name="ie" value="UTF-8" />
				</div>
			</form>
			</div>
<script type="text/javascript">
//<![CDATA[
	var searchbox = MGJS.$("searchbox");
	var searchtxt = MGJS.getElementsByClassName("textfield", "input", searchbox)[0];
	var searchbtn = MGJS.getElementsByClassName("button", "input", searchbox)[0];
	var tiptext = "Type text to search here...";
	if(searchtxt.value == "" || searchtxt.value == tiptext) {
		searchtxt.className += " searchtip";
		searchtxt.value = tiptext;
	}
	searchtxt.onfocus = function(e) {
		if(searchtxt.value == tiptext) {
			searchtxt.value = "";
			searchtxt.className = searchtxt.className.replace(" searchtip", "");
		}
	}
	searchtxt.onblur = function(e) {
		if(searchtxt.value == "") {
			searchtxt.className += " searchtip";
			searchtxt.value = tiptext;
		}
	}
	searchbtn.onclick = function(e) {
		if(searchtxt.value == "" || searchtxt.value == tiptext) {
			return false;
		}
	}
//]]>
</script>
	<!-- searchbox END -->

	<div class="fixed"></div>
</div>
<!-- navigation END -->

<!-- content START -->
<div id="content">

	<!-- main START -->
	<div id="main">


	<div id="postpath">
		<a title="Go to homepage" href="http://blog.yufeng.info/">Home</a>
		 &gt; <a href="http://blog.yufeng.info/archives/category/erlang" rel="category tag">Erlang探索</a>		 &gt; Erlang内存分配器之mbcs_pool	</div>

	<div class="post" id="post-3118">
		<h2>Erlang内存分配器之mbcs_pool</h2>
		<div class="info">
			<span class="date">April 27th, 2014</span>
			<span class="author"><a href="http://blog.yufeng.info/archives/author/admin" title="Posts by Yu Feng" rel="author">Yu Feng</a></span>										<span class="addcomment"><a href="#respond">Leave a comment</a></span>
				<span class="comments"><a href="#comments">Go to comments</a></span>
						<div class="fixed"></div>
		</div>
		<div class="content">
			<div style="margin-top: 15px; font-style: italic">
<p><strong>原创文章，转载请注明：</strong> 转载自<a href="http://blog.yufeng.info/" onclick="_gaq.push(['_trackEvent', 'outbound-article-int', 'http://blog.yufeng.info/', '系统技术非业余研究']);" >系统技术非业余研究</a></p>
<p><strong>本文链接地址:</strong> <a href="http://blog.yufeng.info/archives/3118" onclick="_gaq.push(['_trackEvent', 'outbound-article-int', 'http://blog.yufeng.info/archives/3118', 'Erlang内存分配器之mbcs_pool']);" >Erlang内存分配器之mbcs_pool</a></p>
</div>
<p>Erlang R17.0 发布的release note 里面花了挺多笔墨讲了内存carrier迁移的特性：</p>
<blockquote><p>Support for migration of memory carriers between memory allocator instances has been introduced.<br />
By default this feature is not enabled and do not effect the characteristics of the system. When enabled it has the following impact on the characteristics of the system:</p>
<p>   * Reduced memory footprint when the memory load is unevenly distributed between scheduler specific allocator instances.<br />
   * Depending on the default allocaton strategy used on a specific allocator there might or might not be a slight performance loss.<br />
   * When enabled on the fix_alloc allocator, a different strategy for management of fix blocks will be used.<br />
   * The information returned from erlang:system_info({allocator, A}), and erlang:system_info({allocator_sizes, A}) will be slightly different when this feature has been enabled. An mbcs_pool tuple will be present giving information about abandoned carriers, and in the fix_alloc case no fix_types tuple will be present.</p>
<p>For more information, see the documentation of the +M acul command line argument.</p></blockquote>
<p>那么什么是”migration of memory carriers between memory allocator instances“，解决什么问题呢？<br />
官方的文档 erts/emulator/internal_doc/CarrierMigration.md, 见<a href="https://github.com/erlang/otp/blob/master/erts/emulator/internal_doc/CarrierMigration.md" onclick="_gaq.push(['_trackEvent', 'outbound-article', 'https://github.com/erlang/otp/blob/master/erts/emulator/internal_doc/CarrierMigration.md', '这里']);" >这里</a>, 已经描述的非常清楚了。<br />
<a href="http://blog.yufeng.info/wp-content/uploads/2014/04/allocators-1.png" onclick="_gaq.push(['_trackEvent', 'outbound-article-int', 'http://blog.yufeng.info/wp-content/uploads/2014/04/allocators-1.png', '']);" ><img src="http://blog.yufeng.info/wp-content/uploads/2014/04/allocators-1.png" alt="allocators-1" width="567" height="247" class="alignnone size-full wp-image-3128" /></a><br />
我来简单的说下复述下：<br />
Erlang的内存分配器为了提高性能，每个调度器一个都有自己的内存池，在申请/释放内存的可以避免大量的锁争用，提高了性能。但也带来内存浪费的问题，首先调度器默认使用策略是“full load or not”, 也就是说低ID的调度器如果没饱和的话，不会用下一个调度器。在高负载的情况下，更多的调度器被启用，该调度器上的内存被缓冲，留在池子里。当工作负载下去的的话，因为压力没到，高ID的调度器没机会被使用，也就是说这个时候，这个调度器上的内存就浪费掉了，从整个VM的角度来看，内存的碎片率就很高。Erlang的VM是以稳定性著名的，但是它也有Crash的时候，十有八九是因为内存爆了。我们在设计系统的时候，通常从数据量去反推需要的内存，但是如果有碎片或者浪费存在严重的话，我们就无法准确，就可能导致灾难。 为了解决这个问题，最直接的反应就是当每个调度器池子里面的内存使用率低于一定程度的时候，就把该块内存出让出来，让有需要的调度器能够利用起来。这就是内存carriers迁移要解决的核心问题。</p>
<p>这个特性在R16加入的默认不启用，R17默认启用了，也就是说+M acul 默认是“de”. 带来的影响有下面几个：<br />
1. 内存申请的效率，现在的测试是先在自己的池子里面分配，不满足了就找cpool，再不满足才去找mseg或者sys分配器申请。效率和利用率是鱼和熊掌不可兼得。<br />
2. 内存分配器的内存除了在池子里面还有在cpool里，统计内存的时候要小心。<br />
3. 内存浪费率到什么时候被废弃。</p>
<p><span id="more-3118"></span><br />
我们先来看看acul参数的含义：</p>
<blockquote><p>+M acul <utilization>|de<br />
Abandon carrier utilization limit. A valid <utilization> is an integer in the range [0, 100] representing utilization in percent. When a utilization value larger than zero is used, allocator instances are allowed to abandon multiblock carriers. If de (default enabled) is passed instead of a <utilization>, a recomended non zero utilization value will be used. The actual value chosen depend on allocator type and may be changed between ERTS versions. Currently the default equals de, but this may be changed in the future. Carriers will be abandoned when memory utilization in the allocator instance falls below the utilization value used. Once a carrier has been abandoned, no new allocations will be made in it. When an allocator instance gets an increased multiblock carrier need, it will first try to fetch an abandoned carrier from an allocator instances of the same allocator type. If no abandoned carrier could be fetched, it will create a new empty carrier. When an abandoned carrier has been fetched it will function as an ordinary carrier. This feature has special requirements on the allocation strategy used. Currently only the strategies aoff, aoffcbf and aoffcaobf support abandoned carriers. This feature also requires multiple thread specific instances to be enabled. When enabling this feature, multiple thread specific instances will be enabled if not already enabled, and the aoffcbf strategy will be enabled if current strategy does not support abandoned carriers. This feature can be enabled on all allocators based on the alloc_util framework with the exception of temp_alloc (which would be pointless).
</p></blockquote>
<p>再从源码我们回到上面的几个问题：<br />
<a href="http://blog.yufeng.info/wp-content/uploads/2014/04/mbcs_pool_acul.png" onclick="_gaq.push(['_trackEvent', 'outbound-article-int', 'http://blog.yufeng.info/wp-content/uploads/2014/04/mbcs_pool_acul.png', '']);" ><img src="http://blog.yufeng.info/wp-content/uploads/2014/04/mbcs_pool_acul.png" alt="mbcs_pool_acul" width="555" height="366" class="alignnone size-full wp-image-3119" /></a></p>
<p>我们知道当acul 设置成“de”, 也就是说default的时候<br />
<a href="http://blog.yufeng.info/wp-content/uploads/2014/04/mbcs_pool_acul_default.png" onclick="_gaq.push(['_trackEvent', 'outbound-article-int', 'http://blog.yufeng.info/wp-content/uploads/2014/04/mbcs_pool_acul_default.png', '']);" ><img src="http://blog.yufeng.info/wp-content/uploads/2014/04/mbcs_pool_acul_default.png" alt="mbcs_pool_acul_default" width="440" height="57" class="alignnone size-full wp-image-3120" /></a></p>
<p>这二段源码回答了release note里面“migration of memory carriers” 问题二和三。 问题一在CarrierMigration.md回答掉了。 那现在就剩下问题四需要回答下，这部分内存如何计算的。</p>
<pre class="brush: bash; title: ; notranslate" title="">
$ erl
Erlang/OTP 17 [erts-6.0.1] 1 [64-bit] [smp:16:16] [async-threads:10] [hipe] [kernel-poll:false]

Eshell V6.0.1  (abort with ^G)
1&gt; erlang:system_info({allocator, binary_alloc}).
...
 {instance,2,
           [{versions,&quot;0.9&quot;,&quot;3.0&quot;},
            {options,[{e,true},
                      {t,true},
                      {ramv,false},
                      {sbct,524288},
                      {asbcst,4145152},
                      {rsbcst,20},
                      {rsbcmt,80},
                      {rmbcmt,50},
                      {mmbcs,32768},
                      {mmmbc,18446744073709551615},
                      {mmsbc,256},
                      {lmbcs,5242880},
                      {smbcs,262144},
                      {mbcgs,10},
                      {acul,60},
                      {as,aoffcbf}]},
            {mbcs,[{blocks,0,0,0},
                   {blocks_size,0,0,0},
                   {carriers,1,1,1},
                   {mseg_alloc_carriers,0},
                   {sys_alloc_carriers,1},
                   {carriers_size,32928,32928,32928},
                   {mseg_alloc_carriers_size,0},
                   {sys_alloc_carriers_size,32928}]},
            {mbcs_pool,[{blocks,0},
                        {blocks_size,0},
                        {carriers,0},
                        {carriers_size,0}]},
            {sbcs,[{blocks,0,0,0},
                   {blocks_size,0,0,0},
                   {carriers,0,0,0},
                   {mseg_alloc_carriers,0},
                   {sys_alloc_carriers,0},
                   {carriers_size,0,0,0},
                   {mseg_alloc_carriers_size,0},
                   {sys_alloc_carriers_size,0}]},
            {calls,[{binary_alloc,0,0},
                    {binary_free,0,0},
                    {binary_realloc,0,0},
                    {mseg_alloc,0,0},
                    {mseg_dealloc,0,0},
                    {mseg_realloc,0,0},
                    {sys_alloc,0,1},
                    {sys_free,0,0},
                    {sys_realloc,0,0}]}]},
...
</pre>
<p>从R17的binary_alloc我们可以看出，输出里面多了个mbcs_pool信息，而且acul默认是60，也就是ERTS_ALC_DEFAULT_ENABLED_ACUL。</p>
<p>但是, 内存分配器的这些参数解读非常麻烦，一般的人看不懂。 之前的博文，我就介绍了<a href="http://blog.yufeng.info/archives/3080" onclick="_gaq.push(['_trackEvent', 'outbound-article-int', 'http://blog.yufeng.info/archives/3080', 'recon']);" >recon</a>, 其中的<a href="http://ferd.github.io/recon/recon_alloc.html" onclick="_gaq.push(['_trackEvent', 'outbound-article', 'http://ferd.github.io/recon/recon_alloc.html', 'recon_alloc']);" >recon_alloc</a>模块，就是用来帮用户解决这个问题的：</p>
<blockquote><p>Functions to deal with Erlang&#8217;s memory allocators, or particularly, to try to present the allocator data in a way that makes it simpler to discover possible problems.</p></blockquote>
<p>recon最近的版本就mbcs_pool做了很好的支持，”Include mbcs_pool in all mbcs values“, 参见 <a href="https://github.com/ferd/recon/commit/28daf8dc59883d2415ae42a54351df85ea0aa123" onclick="_gaq.push(['_trackEvent', 'outbound-article', 'https://github.com/ferd/recon/commit/28daf8dc59883d2415ae42a54351df85ea0aa123', '这里']);" >这里</a></p>
<p><a href="http://blog.yufeng.info/wp-content/uploads/2014/04/mbcs_pool_recon.png" onclick="_gaq.push(['_trackEvent', 'outbound-article-int', 'http://blog.yufeng.info/wp-content/uploads/2014/04/mbcs_pool_recon.png', '']);" ><img src="http://blog.yufeng.info/wp-content/uploads/2014/04/mbcs_pool_recon.png" alt="mbcs_pool_recon" width="707" height="109" class="alignnone size-full wp-image-3121" /></a></p>
<blockquote><p>
In R16B02 an option to enable a mbc pool was added. In order to<br />
get the total size of current mbcs we have to include the pool in<br />
all our calculations with mbcs.
</p></blockquote>
<p>有了recon_alloc的帮忙，再花点时间，你就可以非常清楚的知道你的VM内存使用的情况，避免内存使用的悲剧发生。</p>
<p>另外observer里面的crashdump_viewer.erl也把mbcs_pool的内存使用关注起来了，也更准确了。</p>
<p>祝玩的开心！</p>
<div style="margin-top: 0; margin-bottom: 15px; color: #888888; font-size: 80%; font-style: italic">
<p>Post Footer automatically generated by <a href="http://easwy.com/blog/wordpress/wp-posturl/" onclick="_gaq.push(['_trackEvent', 'outbound-article', 'http://easwy.com/blog/wordpress/wp-posturl/', 'wp-posturl plugin']);"   style="color: #8888FF; text-decoration: underline;">wp-posturl plugin</a> for wordpress.</p>
</div>
<div class='yarpp-related'>
<p>Related posts:</p><ol>
<li><a href="http://blog.yufeng.info/archives/1806" rel="bookmark" title="Erlang R15的内存delayed dealloc特性对消息密集型程序的影响">Erlang R15的内存delayed dealloc特性对消息密集型程序的影响 </a></li>
<li><a href="http://blog.yufeng.info/archives/2946" rel="bookmark" title="R16B03新增加super carrier来减少mmap的系统调用">R16B03新增加super carrier来减少mmap的系统调用 </a></li>
<li><a href="http://blog.yufeng.info/archives/3072" rel="bookmark" title="Erlang R17新特性浅评">Erlang R17新特性浅评 </a></li>
<li><a href="http://blog.yufeng.info/archives/3063" rel="bookmark" title="erlang虚拟机内部文档">erlang虚拟机内部文档 </a></li>
<li><a href="http://blog.yufeng.info/archives/3045" rel="bookmark" title="Erlang R16B03发布，R17已发力">Erlang R16B03发布，R17已发力 </a></li>
</ol>
</div>
			<div class="fixed"></div>
		</div>
		<div class="under">
			<span class="categories">Categories: </span><span><a href="http://blog.yufeng.info/archives/category/erlang" rel="category tag">Erlang探索</a></span>			<span class="tags">Tags: </span><span><a href="http://blog.yufeng.info/archives/tag/acul" rel="tag">acul</a>, <a href="http://blog.yufeng.info/archives/tag/mbcs" rel="tag">mbcs</a>, <a href="http://blog.yufeng.info/archives/tag/pool" rel="tag">pool</a>, <a href="http://blog.yufeng.info/archives/tag/r17" rel="tag">R17</a></span>		</div>
	</div>

	<!-- related posts START -->
		<!-- related posts END -->

	<script type="text/javascript" src="http://blog.yufeng.info/wp-content/themes/inove/js/comment.js"></script>



<div id="comments">

<div id="cmtswitcher">
			<a id="commenttab" class="curtab" href="javascript:void(0);" onclick="MGJS.switchTab('thecomments,commentnavi', 'thetrackbacks', 'commenttab', 'curtab', 'trackbacktab', 'tab');">Comments (1)</a>
		<a id="trackbacktab" class="tab" href="javascript:void(0);" onclick="MGJS.switchTab('thetrackbacks', 'thecomments,commentnavi', 'trackbacktab', 'curtab', 'commenttab', 'tab');">Trackbacks (1)</a>
				<span class="addcomment"><a href="#respond">Leave a comment</a></span>
				<span class="addtrackback"><a href="http://blog.yufeng.info/archives/3118/trackback">Trackback</a></span>
		<div class="fixed"></div>
</div>

<div id="commentlist">
	<!-- comments START -->
	<ol id="thecomments">
		<li class="comment regularcomment" id="comment-40396">
		<div class="author">
			<div class="pic">
				<img alt='' src='http://0.gravatar.com/avatar/e770a8cd578094bfa2a1cb1c06d48580?s=32&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&amp;r=G' class='avatar avatar-32 photo' height='32' width='32' />			</div>
			<div class="name">
									<span id="commentauthor-40396">
				
				liuwei
									</span>
							</div>
		</div>

		<div class="info">
			<div class="date">
				September 3rd, 2014 at 22:22					 | <a href="#comment-40396">#1</a>
			</div>
			<div class="act">
				<a href="javascript:void(0);" onclick="MGJS_CMT.reply('commentauthor-40396', 'comment-40396', 'comment');">Reply</a> | 
				<a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-40396', 'comment-40396', 'commentbody-40396', 'comment');">Quote</a>
							</div>
			<div class="fixed"></div>
			<div class="content">
				
				<div id="commentbody-40396">
					<p>详细介绍一下map</p>
<p class="thdrpy">[<a href="javascript:void(0)" onclick="movecfm(event,40396,1,'liuwei');">Reply</a>]</p>				</div>
			</div>
		</div>
		<div class="fixed"></div>

</li><!-- #comment-## -->
	</ol>
	<!-- comments END -->


	<!-- trackbacks START -->
			<ol id="thetrackbacks">
												<li class="trackback">
						<div class="date">
							June 19th, 2014 at 06:23							 | <a href="#comment-32263">#1</a>
						</div>
						<div class="act">
													</div>
						<div class="fixed"></div>
						<div class="title">
							<a href="http://makaidong.com/10849.html">
								Erlang内存分配器之mbcs_pool &#8211; IT牛人博客聚合							</a>
						</div>
					</li>
				
					</ol>
		<div class="fixed"></div>
	<!-- trackbacks END -->
</div>

</div>

	<form action="http://blog.yufeng.info/wp-comments-post.php" method="post" id="commentform">
	<div id="respond">

					
			<div id="author_info">
				<div class="row">
					<input type="text" name="author" id="author" class="textfield" value="" size="24" tabindex="1" />
					<label for="author" class="small">Name (required)</label>
				</div>
				<div class="row">
					<input type="text" name="email" id="email" class="textfield" value="" size="24" tabindex="2" />
					<label for="email" class="small">E-Mail (will not be published) (required)</label>
				</div>
				<div class="row">
					<input type="text" name="url" id="url" class="textfield" value="" size="24" tabindex="3" />
					<label for="url" class="small">Website</label>
				</div>
			</div>

			
		
		<!-- comment input -->
		<div class="row">
			<textarea name="comment" id="comment" tabindex="4" rows="8" cols="50"></textarea>
		</div>

		<!-- comment submit and rss -->
		<div id="submitbox">
			<a class="feed" href="http://blog.yufeng.info/comments/feed">Subscribe to comments feed</a>
			<div class="submitbutton">
				<input name="submit" type="submit" id="submit" class="button" tabindex="5" value="Submit Comment" />
			</div>
						<input type="hidden" name="comment_post_ID" value="3118" />
			<div class="fixed"></div>
		</div>

	</div>
	<p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="d7fba2c4d0" /></p><p class="comment-subscription-form"><input type="checkbox" name="subscribe_comments" id="subscribe_comments" value="subscribe" style="width: auto; -moz-appearance: checkbox; -webkit-appearance: checkbox;" /> <label class="subscribe-label" id="subscribe-label" for="subscribe_comments">Notify me of follow-up comments by email.</label></p><p class="comment-subscription-form"><input type="checkbox" name="subscribe_blog" id="subscribe_blog" value="subscribe" style="width: auto; -moz-appearance: checkbox; -webkit-appearance: checkbox;" /> <label class="subscribe-label" id="subscribe-blog-label" for="subscribe_blog">Notify me of new posts by email.</label></p><p style="display: none;"><input type="hidden" id="ak_js" name="ak_js" value="51"/></p><p><input type="hidden" id="comment_reply_ID" name="comment_reply_ID" value="0" /><input type="hidden" id="comment_reply_dp" name="comment_reply_dp" value="0" /></p><div id="cancel_reply" style="display:none;"><a href="javascript:void(0)" onclick="movecfm(null,0,1,null);" style="color:red;">Click to cancel reply</a></div><script type="text/javascript">
/* <![CDATA[ */
var commentformid = "commentform";
var USERINFO = false;
var atreply = "none";
/* ]]> */
</script>
<script type="text/javascript" src="http://blog.yufeng.info/wp-content/plugins/wordpress-thread-comment/wp-thread-comment.js.php?jsver=common"></script>
	</form>

			<script type="text/javascript">MGJS.loadCommentShortcut();</script>
	

	<div id="postnavi">
		<span class="prev"><a href="http://blog.yufeng.info/archives/3130" rel="next">Erlang公平调度的误解</a></span>
		<span class="next"><a href="http://blog.yufeng.info/archives/3104" rel="prev">基于LLVM的高性能Erlang(Hipe)尝鲜</a></span>
		<div class="fixed"></div>
	</div>


	</div>
	<!-- main END -->

	
<!-- sidebar START -->
<div id="sidebar">

<!-- sidebar north START -->
<div id="northsidebar" class="sidebar">

	<!-- feeds -->
	<div class="widget widget_feeds">
		<div class="content">
			<div id="subscribe">
				<a rel="external nofollow" id="feedrss" title="Subscribe to this blog..." href="http://blog.yufeng.info/feed"><abbr title="Really Simple Syndication">RSS</abbr></a>
									<ul id="feed_readers">
						<li id="google_reader"><a rel="external nofollow" class="reader" title="Subscribe with Google" href="http://fusion.google.com/add?feedurl=http://blog.yufeng.info/feed"><span>Google</span></a></li>
						<li id="youdao_reader"><a rel="external nofollow" class="reader" title="Subscribe with Youdao" href="http://reader.youdao.com/#url=http://blog.yufeng.info/feed"><span>Youdao</span></a></li>
						<li id="xianguo_reader"><a rel="external nofollow" class="reader" title="Subscribe with Xian Guo" href="http://www.xianguo.com/subscribe.php?url=http://blog.yufeng.info/feed"><span>Xian Guo</span></a></li>
						<li id="zhuaxia_reader"><a rel="external nofollow" class="reader" title="Subscribe with Zhua Xia" href="http://www.zhuaxia.com/add_channel.php?url=http://blog.yufeng.info/feed"><span>Zhua Xia</span></a></li>
						<li id="yahoo_reader"><a rel="external nofollow" class="reader" title="Subscribe with My Yahoo!"	href="http://add.my.yahoo.com/rss?url=http://blog.yufeng.info/feed"><span>My Yahoo!</span></a></li>
						<li id="newsgator_reader"><a rel="external nofollow" class="reader" title="Subscribe with newsgator"	href="http://www.newsgator.com/ngs/subscriber/subfext.aspx?url=http://blog.yufeng.info/feed"><span>newsgator</span></a></li>
						<li id="bloglines_reader"><a rel="external nofollow" class="reader" title="Subscribe with Bloglines"	href="http://www.bloglines.com/sub/http://blog.yufeng.info/feed"><span>Bloglines</span></a></li>
						<li id="inezha_reader"><a rel="external nofollow" class="reader" title="Subscribe with iNezha"	href="http://inezha.com/add?url=http://blog.yufeng.info/feed"><span>iNezha</span></a></li>
					</ul>
							</div>
							<a id="followme" title="Follow me!" href="http://twitter.com/eric33yu/">Twitter</a>
						<div class="fixed"></div>
		</div>
	</div>

	<!-- showcase -->
	
<div id="paypal_donations-3" class="widget widget_paypal_donations"><h3>buy me a coffee.</h3><!-- Begin PayPal Donations by http://johansteen.se/ -->

<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
    <div class="paypal-donations">
        <input type="hidden" name="cmd" value="_donations" />
        <input type="hidden" name="business" value="mryufeng@gmail.com" />
        <input type="hidden" name="item_name" value="buy me a coffee." />
        <input type="hidden" name="item_number" value="yufeng" />
        <input type="hidden" name="amount" value="10" />
        <input type="hidden" name="currency_code" value="USD" />
        <input type="image" src="https://www.paypal.com/en_US/i/btn/btn_donate_LG.gif" name="submit" alt="PayPal - The safer, easier way to pay online." />
        <img alt="" src="https://www.paypal.com/en_US/i/scr/pixel.gif" width="1" height="1" />
    </div>
</form>
<!-- End PayPal Donations -->
</div><div id="text-3" class="widget widget_text"><h3>广告时间</h3>			<div class="textwidget"><p>阿里核心系统数据库组招募高手！</p>
</div>
		</div><div id="text-4" class="widget widget_text"><h3>工作机会</h3>			<div class="textwidget"><p>招聘信息：<a href="http://blog.yufeng.info/job" onclick="_gaq.push(['_trackEvent', 'outbound-widget-int', 'http://blog.yufeng.info/job', '猛点这里获得工作机会']);" >猛点这里获得工作机会</a>  </p>
</div>
		</div>		<div id="recent-posts-3" class="widget widget_recent_entries">		<h3>Recent Posts</h3>		<ul>
					<li>
				<a href="http://blog.yufeng.info/archives/3149">R17新的调度策略+sub</a>
						</li>
					<li>
				<a href="http://blog.yufeng.info/archives/3133">Erlang内存体系调优</a>
						</li>
					<li>
				<a href="http://blog.yufeng.info/archives/3130">Erlang公平调度的误解</a>
						</li>
					<li>
				<a href="http://blog.yufeng.info/archives/3118">Erlang内存分配器之mbcs_pool</a>
						</li>
					<li>
				<a href="http://blog.yufeng.info/archives/3104">基于LLVM的高性能Erlang(Hipe)尝鲜</a>
						</li>
				</ul>
		</div><div id="recent-comments-3" class="widget widget_recent_comments"><h3>Recent Comments</h3><ul id="recentcomments"><li class="recentcomments"><span class="comment-author-link"><a href='http://mcoder-003-site1.site4future.com/archives/9' rel='external nofollow' class='url'>TCP洪水攻击（SYN Flood）的诊断和处理 | 我的博客</a></span> on <a href="http://blog.yufeng.info/archives/1380/comment-page-1#comment-45198">老生常谈: ulimit问题及其影响</a></li><li class="recentcomments"><span class="comment-author-link"><a href='http://riccardotravels.wordpress.com/2014/04/23/cheap-holidays-with-h10-hotels-using-voucher-codes/' rel='external nofollow' class='url'>riccardotravels.wordpress.com</a></span> on <a href="http://blog.yufeng.info/archives/1768/comment-page-1#comment-44764">Flashcache使用的误区以及解决方案</a></li><li class="recentcomments"><span class="comment-author-link"><a href='http://yufeng.info' rel='external nofollow' class='url'>Yu Feng</a></span> on <a href="http://blog.yufeng.info/archives/1752/comment-page-1#comment-44520">Erlang如何限制节点对集群的访问之net_kernel:allow</a></li></ul></div></div>
<!-- sidebar north END -->

<div id="centersidebar">

	<!-- sidebar east START -->
	<div id="eastsidebar" class="sidebar">
	
		<!-- categories -->
		<div class="widget widget_categories">
			<h3>Categories</h3>
			<ul>
					<li class="cat-item cat-item-3"><a href="http://blog.yufeng.info/archives/category/erlang" title="探索erlang的方方面面">Erlang探索</a>
</li>
	<li class="cat-item cat-item-240"><a href="http://blog.yufeng.info/archives/category/linux_kb" >Linux</a>
</li>
	<li class="cat-item cat-item-481"><a href="http://blog.yufeng.info/archives/category/%e4%ba%86%e8%a7%a3%e7%b3%bb%e5%88%97" >了解系列</a>
</li>
	<li class="cat-item cat-item-480"><a href="http://blog.yufeng.info/archives/category/%e4%bd%93%e7%b3%bb%e7%bb%93%e6%9e%84" >体系结构</a>
</li>
	<li class="cat-item cat-item-152"><a href="http://blog.yufeng.info/archives/category/tools" >工具介绍</a>
</li>
	<li class="cat-item cat-item-374"><a href="http://blog.yufeng.info/archives/category/database" title="MySQL和其他KV数据库">数据库</a>
</li>
	<li class="cat-item cat-item-4"><a href="http://blog.yufeng.info/archives/category/misc" title="无法分类 乱七八糟的东西">杂七杂八</a>
</li>
	<li class="cat-item cat-item-290"><a href="http://blog.yufeng.info/archives/category/%e6%ba%90%e7%a0%81%e5%88%86%e6%9e%90" >源码分析</a>
</li>
	<li class="cat-item cat-item-46"><a href="http://blog.yufeng.info/archives/category/life" title="情感交流">生活</a>
</li>
	<li class="cat-item cat-item-1"><a href="http://blog.yufeng.info/archives/category/network" title="网络编程和工具">网络编程</a>
</li>
	<li class="cat-item cat-item-311"><a href="http://blog.yufeng.info/archives/category/%e8%b0%83%e4%bc%98" >调优</a>
</li>
			</ul>
		</div>

		</div>
	<!-- sidebar east END -->

	<!-- sidebar west START -->
	<div id="westsidebar" class="sidebar">
	
		<!-- blogroll -->
		<div class="widget widget_links">
			<h3>Blogroll</h3>
			<ul>
				<li><a href="http://www.bookandman.com/?from=yufeng" target="_blank">book and man</a></li>
<li><a href="http://www.cnerlang.com">erlang中文社区</a></li>
<li><a href="http://dinglin.javaeye.com/?from=yufeng">MySQL专家丁奇</a></li>
<li><a href="http://logn.me" title="nessdb">一工(BohuTANG)博客</a></li>
<li><a href="http://blog.coly.li/?from=yufeng" title="文件系统专家" target="_blank">伯松的blog</a></li>
<li><a href="http://gaoyusong.com/?from=yufeng">剑川个人博客</a></li>
<li><a href="http://zhuzhaoyuan.com/?from=yufeng" target="_blank">叔度博客(nginx专家)</a></li>
<li><a href="http://www.imagerabit.com/?from=yufeng">小天后的图像处理博客</a></li>
<li><a href="http://www.qingliangcn.com/?from=yufeng" target="_blank">庆亮的博客</a></li>
<li><a href="http://www.osforce.cn/?from=yufeng" title="开源力量">开源力量</a></li>
<li><a href="http://www.penglixun.com/?from=yufeng">彭爷MySQL研究博客</a></li>
<li><a href="http://mryufeng.javaeye.com?from=yufeng" title="javaeye上的" target="_blank">我的旧非业余研究</a></li>
<li><a href="http://donghao.org/?from=yufeng" title="内核和文件系统">斯巴达第二季</a></li>
<li><a href="http://www.nosqlnotes.net/?from=yufeng">日照分布式存储</a></li>
<li><a href="http://blog.lifeibo.com/?from=yufeng">李子非主流程序员</a></li>
<li><a href="http://ybbct.iteye.com/?from=yufeng">武藏个人博客</a></li>
<li><a href="http://nil-zhang.iteye.com/?from=yufeng">淘宝千石的博客</a></li>
<li><a href="http://mysql.taobao.org" title="维护淘宝的MySQL分支">淘宝数据库组</a></li>
<li><a href="http://csrd.aliapp.com/?from=yufeng" title="基础 极致 分享" target="_blank">淘宝核心系统博客</a></li>
<li><a href="http://abloz.com?from=yufeng">瀚海星空</a></li>
<li><a href="http://www.cnblogs.com/lispking/">点滴随笔(MySQL和集群相关)</a></li>
<li><a href="http://hidba.org/?from=yufeng" title="玄惭MySQL运维博客">玄惭MySQL运维博客</a></li>
<li><a href="http://wqtn22.iteye.com/?from=yufeng">皓庭Erlang开发博客</a></li>
<li><a href="http://i.mtime.com/844165">祁奚个人博客</a></li>
<li><a href="http://www.wangchi.info/?from=yufeng" title="音乐 电子 composer" target="_blank">老婆的交互式音乐</a></li>
<li><a href="http://www.orczhou.com/">苏普的MySQL故事博客</a></li>
<li><a href="http://www.hoterran.info/?from=yufeng" title="Erlang开发">运维和开发-hoterran</a></li>
<li><a href="http://www.alibabatech.org/?from=yufeng">阿里巴巴技术协会</a></li>
<li><a href="http://www.pagefault.info/?from=yufeng">雕梁nginx和内核</a></li>
<li><a href="http://blog.csdn.net/wudongxu?from=yufeng">项仲个人博客</a></li>
			</ul>
		</div>

		</div>
	<!-- sidebar west END -->
	<div class="fixed"></div>
</div>

<!-- sidebar south START -->
<div id="southsidebar" class="sidebar">

	<!-- archives -->
	<div class="widget">
		<h3>Archives</h3>
					<ul>
					<li><a href='http://blog.yufeng.info/archives/date/2014/05'>May 2014</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2014/04'>April 2014</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2014/03'>March 2014</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2014/02'>February 2014</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2014/01'>January 2014</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2013/12'>December 2013</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2013/11'>November 2013</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2013/10'>October 2013</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2013/08'>August 2013</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2013/07'>July 2013</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2013/06'>June 2013</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2013/05'>May 2013</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2013/04'>April 2013</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2013/03'>March 2013</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2013/02'>February 2013</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2013/01'>January 2013</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2012/12'>December 2012</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2012/10'>October 2012</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2012/09'>September 2012</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2012/08'>August 2012</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2012/07'>July 2012</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2012/06'>June 2012</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2012/05'>May 2012</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2012/04'>April 2012</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2012/03'>March 2012</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2012/02'>February 2012</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2012/01'>January 2012</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2011/12'>December 2011</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2011/11'>November 2011</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2011/10'>October 2011</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2011/09'>September 2011</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2011/07'>July 2011</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2011/06'>June 2011</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2011/05'>May 2011</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2011/04'>April 2011</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2011/03'>March 2011</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2011/02'>February 2011</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2011/01'>January 2011</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2010/12'>December 2010</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2010/11'>November 2010</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2010/10'>October 2010</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2010/09'>September 2010</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2010/08'>August 2010</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2010/07'>July 2010</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2010/06'>June 2010</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2010/05'>May 2010</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2010/04'>April 2010</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2010/03'>March 2010</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2010/02'>February 2010</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2010/01'>January 2010</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2009/11'>November 2009</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2009/10'>October 2009</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2009/09'>September 2009</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2009/08'>August 2009</a></li>
			</ul>
			</div>

	<!-- meta -->
	<div class="widget">
		<h3>Meta</h3>
		<ul>
						<li><a href="http://blog.yufeng.info/wp-login.php">Log in</a></li>
		</ul>
	</div>

</div>
<!-- sidebar south END -->

</div>
<!-- sidebar END -->
	<div class="fixed"></div>
</div>
<!-- content END -->

<!-- footer START -->
<div id="footer">
	<a id="gotop" href="#" onclick="MGJS.goTop();return false;">Top</a>
	<a id="powered" href="http://wordpress.org/">WordPress</a>
	<div id="copyright">
		Copyright &copy; 2009-2014 系统技术非业余研究	</div>
	<div id="themeinfo">
		Theme by <a href="http://www.neoease.com/">NeoEase</a>. Valid <a href="http://validator.w3.org/check?uri=referer">XHTML 1.1</a> and <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3">CSS 3</a>.	</div>
</div>
<!-- footer END -->

</div>
<!-- container END -->
</div>
<!-- wrap END -->

	<div style="display:none">
	<div class="grofile-hash-map-e770a8cd578094bfa2a1cb1c06d48580">
	</div>
	</div>
<script type='text/javascript' src='http://blog.yufeng.info/wp-content/plugins/akismet/_inc/form.js?ver=3.0.2'></script>
<script type='text/javascript' src='http://blog.yufeng.info/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/shCore.js?ver=2.1.364'></script>
<script type='text/javascript' src='http://blog.yufeng.info/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/shBrushBash.js?ver=2.1.364'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://blog.yufeng.info/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/styles/shCore.css?ver=2.1.364";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://blog.yufeng.info/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/styles/shThemeDefault.css?ver=2.1.364";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.clipboardSwf = 'http://blog.yufeng.info/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf';
	SyntaxHighlighter.config.strings.expandSource = 'show source';
	SyntaxHighlighter.config.strings.viewSource = 'view source';
	SyntaxHighlighter.config.strings.copyToClipboard = 'copy to clipboard';
	SyntaxHighlighter.config.strings.copyToClipboardConfirmation = 'The code is in your clipboard now';
	SyntaxHighlighter.config.strings.print = 'print';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['gutter'] = false;
	SyntaxHighlighter.defaults['pad-line-numbers'] = true;
	SyntaxHighlighter.defaults['smart-tabs'] = false;
	SyntaxHighlighter.all();
</script>
<link rel='stylesheet' id='yarppRelatedCss-css'  href='http://blog.yufeng.info/wp-content/plugins/yet-another-related-posts-plugin/style/related.css?ver=4.0' type='text/css' media='all' />
<script type='text/javascript' src='http://s0.wp.com/wp-content/js/devicepx-jetpack.js?ver=201444'></script>
<script type='text/javascript' src='http://s.gravatar.com/js/gprofiles.js?ver=2014Octaa'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var WPGroHo = {"my_hash":""};
/* ]]> */
</script>
<script type='text/javascript' src='http://blog.yufeng.info/wp-content/plugins/jetpack/modules/wpgroho.js?ver=4.0'></script>

	<script src="http://stats.wp.com/e-201444.js" type="text/javascript"></script>
	<script type="text/javascript">
	st_go({v:'ext',j:'1:3.1.1',blog:'21500275',post:'3118',tz:'8'});
	var load_cmc = function(){linktracker_init(21500275,3118,2);};
	if ( typeof addLoadEvent != 'undefined' ) addLoadEvent(load_cmc);
	else load_cmc();
	</script>
</body>
</html>

