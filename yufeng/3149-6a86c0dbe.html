<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN" "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head profile="http://gmpg.org/xfn/11">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7" />

	<title>R17新的调度策略+sub | 系统技术非业余研究</title>
	<link rel="alternate" type="application/rss+xml" title="RSS 2.0 - all posts" href="http://blog.yufeng.info/feed" />
	<link rel="alternate" type="application/rss+xml" title="RSS 2.0 - all comments" href="http://blog.yufeng.info/comments/feed" />
	<link rel="pingback" href="http://blog.yufeng.info/xmlrpc.php" />

	<!-- style START -->
	<!-- default style -->
	<style type="text/css" media="screen">@import url( http://blog.yufeng.info/wp-content/themes/inove/style.css );</style>
	<!-- for translations -->
		<!--[if IE]>
		<link rel="stylesheet" href="http://blog.yufeng.info/wp-content/themes/inove/ie.css" type="text/css" media="screen" />
	<![endif]-->
	<!-- style END -->

	<!-- script START -->
	<script type="text/javascript" src="http://blog.yufeng.info/wp-content/themes/inove/js/base.js"></script>
	<script type="text/javascript" src="http://blog.yufeng.info/wp-content/themes/inove/js/menu.js"></script>
	<!-- script END -->

	<link rel="alternate" type="application/rss+xml" title="系统技术非业余研究 &raquo; R17新的调度策略+sub Comments Feed" href="http://blog.yufeng.info/archives/3149/feed" />
<link rel='stylesheet' id='yarppWidgetCss-css'  href='http://blog.yufeng.info/wp-content/plugins/yet-another-related-posts-plugin/style/widget.css?ver=4.0' type='text/css' media='all' />
<link rel='stylesheet' id='jetpack-subscriptions-css'  href='http://blog.yufeng.info/wp-content/plugins/jetpack/modules/subscriptions/subscriptions.css?ver=4.0' type='text/css' media='all' />
<link rel='stylesheet' id='wp-syntax-css-css'  href='http://blog.yufeng.info/wp-content/themes/inove/wp-syntax.css?ver=1.0' type='text/css' media='all' />
<link rel='stylesheet' id='jetpack-widgets-css'  href='http://blog.yufeng.info/wp-content/plugins/jetpack/modules/widgets/widgets.css?ver=20121003' type='text/css' media='all' />
<!-- This site uses the Yoast Google Analytics plugin v5.0.7 - Universal disabled - https://yoast.com/wordpress/plugins/google-analytics/ -->
<script type="text/javascript">

	var _gaq = _gaq || [];
	_gaq.push(['_setAccount', 'UA-6788139-3']);
	_gaq.push(['_gat._forceSSL']);
	_gaq.push(['_trackPageview']);

	(function () {
		var ga = document.createElement('script');
		ga.type = 'text/javascript';
		ga.async = true;
		ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		var s = document.getElementsByTagName('script')[0];
		s.parentNode.insertBefore(ga, s);
	})();

</script>
<!-- / Yoast Google Analytics -->
<script type='text/javascript' src='http://blog.yufeng.info/wp-includes/js/jquery/jquery.js?ver=1.11.1'></script>
<script type='text/javascript' src='http://blog.yufeng.info/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.2.1'></script>
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="http://blog.yufeng.info/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="http://blog.yufeng.info/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='Erlang内存体系调优' href='http://blog.yufeng.info/archives/3133' />
<meta name="generator" content="WordPress 4.0" />
<link rel='shortlink' href='http://wp.me/p1sdcD-ON' />

<script type='text/javascript'>
var g_hanaFlash = false;
try {
  var fo = new ActiveXObject('ShockwaveFlash.ShockwaveFlash');
  if(fo) g_hanaFlash = true;
}catch(e){
  if(navigator.mimeTypes ['application/x-shockwave-flash'] != undefined) g_hanaFlash = true;
}
function hanaTrackEvents(arg1,arg2,arg3,arg4) { if ( typeof( pageTracker ) !=='undefined') { pageTracker._trackEvent(arg1, arg2, arg3, arg4);} else if ( typeof(_gaq) !=='undefined'){  _gaq.push(['_trackEvent', arg1, arg2, arg3, arg4]);}}
function hana_check_mobile_device(){ if(navigator.userAgent.match(/iPhone/i) || navigator.userAgent.match(/iPod/i) || navigator.userAgent.match(/iPad/i)  || navigator.userAgent.match(/Android/i)) { return true; }else return false; }
</script>
<style type="text/css">
.sfs-subscriber-count { width: 88px; overflow: hidden; height: 26px; color: #424242; font: 9px Verdana, Geneva, sans-serif; letter-spacing: 1px; }
.sfs-count { width: 86px; height: 17px; line-height: 17px; margin: 0 auto; background: #ccc; border: 1px solid #909090; border-top-color: #fff; border-left-color: #fff; }
.sfs-count span { display: inline-block; height: 11px; line-height: 12px; margin: 2px 1px 2px 2px; padding: 0 2px 0 3px; background: #e4e4e4; border: 1px solid #a2a2a2; border-bottom-color: #fff; border-right-color: #fff; }
.sfs-stats { font-size: 6px; line-height: 6px; margin: 1px 0 0 1px; word-spacing: 2px; text-align: center; text-transform: uppercase; }
</style>
	<style type="text/css">.recentcomments a{display:inline !important;padding:0 !important;margin:0 !important;}</style>

<!-- All in One SEO Pack 2.2.3.1 by Michael Torbert of Semper Fi Web Design[326,364] -->
<link rel="author" href="https://plus.google.com/113696493914077990187" />
<meta name="description"  content="R17的release note提到： OTP-11385 A new optional scheduler utilization balancing mechanism has been introduced. For more information see the +sub" />

<meta name="keywords"  content="+sub,scheduler utilization,erlang探索,源码分析" />

<link rel="canonical" href="http://blog.yufeng.info/archives/3149" />
		<script type="text/javascript">
		  var _gaq = _gaq || [];
		  _gaq.push(['_setAccount', 'UA-6788139-3']);
		  _gaq.push(['_setAllowLinker', true]);
		  _gaq.push(['_trackPageview']);
		  (function() {
		    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
			ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
		    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
		  })();
		</script>
		<script type="text/javascript">
		function recordOutboundLink(link, category, action) {
					_gat._getTrackerByName()._trackEvent(category, action);
					if ( link.target == '_blank' ) return true;
			setTimeout('document.location = "' + link.href + '"', 100);
			return false;
		}
			/* use regular Javascript for this */
			function getAttr(ele, attr) {
				var result = (ele.getAttribute && ele.getAttribute(attr)) || null;
				if( !result ) {
					var attrs = ele.attributes;
					var length = attrs.length;
					for(var i = 0; i < length; i++)
					if(attr[i].nodeName === attr) result = attr[i].nodeValue;
				}
				return result;
			}
			function aiosp_addLoadEvent(func) {
			  var oldonload = window.onload;
			  if (typeof window.onload != 'function') {
			    window.onload = func;
			  } else {
			    window.onload = function() {
			      if (oldonload) {
			        oldonload();
			      }
			      func();
			    }
			  }
			}
			
			function aiosp_addEvent(element, evnt, funct){
			  if (element.attachEvent)
			   return element.attachEvent('on'+evnt, funct);
			  else
			   return element.addEventListener(evnt, funct, false);
			}

			aiosp_addLoadEvent(function () {
				var links = document.getElementsByTagName('a');
				for (var x=0; x < links.length; x++) {
					if (typeof links[x] == 'undefined') continue;
					aiosp_addEvent( links[x], 'onclick', function () {
						var mydomain = new RegExp(document.domain, 'i');
						href = getAttr(this, 'href');
						if (href && href.toLowerCase().indexOf('http') === 0 && !mydomain.test(href)) {
							recordOutboundLink(this, 'Outbound Links', href);
						}
					});
				}
			});
		</script>
<!-- /all in one seo pack -->

<!-- Jetpack Open Graph Tags -->
<meta property="og:type" content="article" />
<meta property="og:title" content="R17新的调度策略+sub" />
<meta property="og:url" content="http://blog.yufeng.info/archives/3149" />
<meta property="og:description" content="R17的release note提到： OTP-11385 A new optional scheduler utilization balancing mechanism has been introduced. For more information see the +sub command line argument. Characteristics impact: None, wh..." />
<meta property="article:published_time" content="2014-05-18T12:52:24+00:00" />
<meta property="article:modified_time" content="2014-06-04T06:42:13+00:00" />
<meta property="article:author" content="http://blog.yufeng.info/archives/author/admin" />
<meta property="og:site_name" content="系统技术非业余研究" />
<meta property="og:image" content="http://blog.yufeng.info/wp-content/uploads/2014/05/nmon2.jpg" />
<meta property="og:image" content="http://blog.yufeng.info/wp-content/uploads/2014/05/nmon1.jpg" />
<meta name="twitter:site" content="@jetpack" />
<meta name="twitter:image" content="http://blog.yufeng.info/wp-content/uploads/2014/05/nmon1.jpg?w=240" />
<meta name="twitter:card" content="summary" />
<style type="text/css" id="syntaxhighlighteranchor"></style>
<!-- wp thread comment 1.4.9.4.002 -->
<style type="text/css" media="screen">

.editComment, .editableComment, .textComment{
	display: inline;
}
.comment-childs{
	border: 1px solid #999;
	margin: 5px 2px 2px 4px;
	padding: 4px 2px 2px 4px;
	background-color: white;
}
.chalt{
	background-color: #E2E2E2;
}
#newcomment{
	border:1px dashed #777;width:90%;
}
#newcommentsubmit{
	color:red;
}
.adminreplycomment{
	border:1px dashed #777;
	width:99%;
	margin:4px;
	padding:4px;
}
.mvccls{
	color: #999;
}
			
</style>
</head>


<body>                                                                                                                                                                                                                                                                                                                                                                                                                <!-- wrap START -->
<div id="wrap">

<!-- container START -->
<div id="container"  >

<!-- header START -->
<div id="header">

	<!-- banner START -->
			<div class="banner">
			捐赠：<a href="https://me.alipay.com/mryufeng">喜欢就请我喝一杯</a> 		</div>
		<!-- banner END -->

	<div id="caption">
		<h1 id="title"><a href="http://blog.yufeng.info/">系统技术非业余研究</a></h1>
		<div id="tagline">系统技术深度探索和应用</div>
	</div>

	<div class="fixed"></div>
</div>
<!-- header END -->

<!-- navigation START -->
<div id="navigation">
	<!-- menus START -->
	<ul id="menus">
		<li class="page_item"><a class="home" title="Home" href="http://blog.yufeng.info/">Home</a></li>
		<li class="page_item page-item-591"><a href="http://blog.yufeng.info/job">推荐工作机会</a></li>
<li class="page_item page-item-122"><a href="http://blog.yufeng.info/ppt">资料下载</a></li>
<li class="page_item page-item-65"><a href="http://blog.yufeng.info/%e7%95%99%e8%a8%80%e6%9d%bf">留言板</a></li>
<li class="page_item page-item-2"><a href="http://blog.yufeng.info/about">关于我</a></li>
		<li><a class="lastmenu" href="javascript:void(0);"></a></li>
	</ul>
	<!-- menus END -->

	<!-- searchbox START -->
	<div id="searchbox">
					<form action="http://www.google.com/cse" method="get">
				<div class="content">
					<input type="text" class="textfield" name="q" size="24" />
					<input type="submit" class="button" name="sa" value="" />
					<input type="hidden" name="cx" value="011994216034381653247:b54vq7hrjse" />
					<input type="hidden" name="ie" value="UTF-8" />
				</div>
			</form>
			</div>
<script type="text/javascript">
//<![CDATA[
	var searchbox = MGJS.$("searchbox");
	var searchtxt = MGJS.getElementsByClassName("textfield", "input", searchbox)[0];
	var searchbtn = MGJS.getElementsByClassName("button", "input", searchbox)[0];
	var tiptext = "Type text to search here...";
	if(searchtxt.value == "" || searchtxt.value == tiptext) {
		searchtxt.className += " searchtip";
		searchtxt.value = tiptext;
	}
	searchtxt.onfocus = function(e) {
		if(searchtxt.value == tiptext) {
			searchtxt.value = "";
			searchtxt.className = searchtxt.className.replace(" searchtip", "");
		}
	}
	searchtxt.onblur = function(e) {
		if(searchtxt.value == "") {
			searchtxt.className += " searchtip";
			searchtxt.value = tiptext;
		}
	}
	searchbtn.onclick = function(e) {
		if(searchtxt.value == "" || searchtxt.value == tiptext) {
			return false;
		}
	}
//]]>
</script>
	<!-- searchbox END -->

	<div class="fixed"></div>
</div>
<!-- navigation END -->

<!-- content START -->
<div id="content">

	<!-- main START -->
	<div id="main">


	<div id="postpath">
		<a title="Go to homepage" href="http://blog.yufeng.info/">Home</a>
		 &gt; <a href="http://blog.yufeng.info/archives/category/erlang" rel="category tag">Erlang探索</a>, <a href="http://blog.yufeng.info/archives/category/%e6%ba%90%e7%a0%81%e5%88%86%e6%9e%90" rel="category tag">源码分析</a>		 &gt; R17新的调度策略+sub	</div>

	<div class="post" id="post-3149">
		<h2>R17新的调度策略+sub</h2>
		<div class="info">
			<span class="date">May 18th, 2014</span>
			<span class="author"><a href="http://blog.yufeng.info/archives/author/admin" title="Posts by Yu Feng" rel="author">Yu Feng</a></span>										<span class="addcomment"><a href="#respond">Leave a comment</a></span>
				<span class="comments"><a href="#comments">Go to comments</a></span>
						<div class="fixed"></div>
		</div>
		<div class="content">
			<div style="margin-top: 15px; font-style: italic">
<p><strong>原创文章，转载请注明：</strong> 转载自<a href="http://blog.yufeng.info/" onclick="_gaq.push(['_trackEvent', 'outbound-article-int', 'http://blog.yufeng.info/', '系统技术非业余研究']);" >系统技术非业余研究</a></p>
<p><strong>本文链接地址:</strong> <a href="http://blog.yufeng.info/archives/3149" onclick="_gaq.push(['_trackEvent', 'outbound-article-int', 'http://blog.yufeng.info/archives/3149', 'R17新的调度策略+sub']);" >R17新的调度策略+sub</a></p>
</div>
<p>R17的<a href="http://www.erlang.org/download/otp_src_17.0.readme" onclick="_gaq.push(['_trackEvent', 'outbound-article', 'http://www.erlang.org/download/otp_src_17.0.readme', 'release note']);" >release note</a>提到：</p>
<blockquote><p>   OTP-11385  A new optional scheduler utilization balancing mechanism has<br />
	      been introduced. For more information see the +sub command<br />
	      line argument.</p>
<p>	      Characteristics impact: None, when not enabled. When enabled,<br />
	      changed timing in the system, normally a small overhead due<br />
	      to measuring of utilization and calculating balancing<br />
	      information. On some systems, such as old Windows systems,<br />
	      the overhead can be quite substantial. This time measurement<br />
	      overhead highly depend on the underlying primitives provided<br />
	      by the OS.
</p></blockquote>
<p>引入了新的调度策略，具体的实现参见：<a href="https://github.com/erlang/otp/commit/e7ea832a4a3a8ba2f94ce02a47ca34b60277cb0a" onclick="_gaq.push(['_trackEvent', 'outbound-article', 'https://github.com/erlang/otp/commit/e7ea832a4a3a8ba2f94ce02a47ca34b60277cb0a', '这里']);" >这里</a><br />
作者是大名鼎鼎的rickard-green，代码质量一定不会错的。 </p>
<p>那这调度器策略干啥的呢？参见<a href="http://www.erlang.org/doc/man/erl.html" onclick="_gaq.push(['_trackEvent', 'outbound-article', 'http://www.erlang.org/doc/man/erl.html', 'erl文档']);" >erl文档</a>, 写的很清楚了：</p>
<blockquote><p>+sub true|false<br />
Enable or disable scheduler utilization balancing of load. By default scheduler utilization balancing is disabled and instead scheduler compaction of load is enabled which will strive for a load distribution which causes as many scheduler threads as possible to be fully loaded (i.e., not run out of work). When scheduler utilization balancing is enabled the system will instead try to balance scheduler utilization between schedulers. That is, strive for equal scheduler utilization on all schedulers.
</p></blockquote>
<p>再对比下默认的调度器策略说明,+scl:</p>
<blockquote><p>+scl true|false<br />
Enable or disable scheduler compaction of load. By default scheduler compaction of load is enabled. When enabled, load balancing will strive for a load distribution which causes as many scheduler threads as possible to be fully loaded (i.e., not run out of work). This is accomplished by migrating load (e.g. runnable processes) into a smaller set of schedulers when schedulers frequently run out of work. When disabled, the frequency with which schedulers run out of work will not be taken into account by the load balancing logic.
</p></blockquote>
<p>就很容易明白，之前的调度策略是先让低ID的调度器忙起来，不够用的话，再把高ID的拉下水，比较节能。但是在某些专机专用的场合，调度器能耗不是重点，希望全部调度器能够参与计算，减少系统的延迟，才是重点。 那这个+sub true就是你想要的。<br />
这个特性唯一依赖的就是高精度时钟，而linux是不缺的, 默认不开启。<br />
写段代码验证下，fib:busy让CPU保持狂运算：</p>
<pre class="brush: bash; title: ; notranslate" title="">
$ cat fib.erl
-module(fib).
-export([fib/1, busy/0]).

fib(0) -&gt; 1;
fib(1) -&gt; 1;
fib(N) -&gt; fib(N-1) + fib(N-2).
busy()-&gt; fib(10), busy().
</pre>
<p>分别用不同的调度器策略试验下效果， +sbt db绑定CPU，方便观察：</p>
<pre class="brush: erlang; title: ; notranslate" title="">
$ erl  +sbt db +sub true 
Erlang/OTP 17 [erts-6.0.1] 1 [64-bit] [smp:16:16] [async-threads:10] [hipe] [kernel-poll:false]

Eshell V6.0.1  (abort with ^G)
1&gt; [spawn(fun()-&gt; fib:busy() end)||_&lt;-lists:seq(1,8)].
[&lt;0.34.0&gt;,&lt;0.35.0&gt;,&lt;0.36.0&gt;,&lt;0.37.0&gt;,&lt;0.38.0&gt;,&lt;0.39.0&gt;,
 &lt;0.40.0&gt;,&lt;0.41.0&gt;]
2&gt; 
</pre>
<p>不同的策略，CPU使用情况如下图（<a href="http://nmon.sourceforge.net/pmwiki.php" onclick="_gaq.push(['_trackEvent', 'outbound-article', 'http://nmon.sourceforge.net/pmwiki.php', 'nmon']);" >nmon</a>）：<br />
+sub false<br />
<a href="http://blog.yufeng.info/wp-content/uploads/2014/05/nmon1.jpg" onclick="_gaq.push(['_trackEvent', 'outbound-article-int', 'http://blog.yufeng.info/wp-content/uploads/2014/05/nmon1.jpg', '']);" ><img src="http://blog.yufeng.info/wp-content/uploads/2014/05/nmon1.jpg" alt="nmon1" width="625" height="293" class="alignnone size-full wp-image-3156" /></a><br />
+sub true<br />
<a href="http://blog.yufeng.info/wp-content/uploads/2014/05/nmon2.jpg" onclick="_gaq.push(['_trackEvent', 'outbound-article-int', 'http://blog.yufeng.info/wp-content/uploads/2014/05/nmon2.jpg', '']);" ><img src="http://blog.yufeng.info/wp-content/uploads/2014/05/nmon2.jpg" alt="nmon2" width="631" height="292" class="alignnone size-full wp-image-3157" /></a><br />
效果非常明显。</p>
<p>祝玩的开心。
<div style="margin-top: 0; margin-bottom: 15px; color: #888888; font-size: 80%; font-style: italic">
<p>Post Footer automatically generated by <a href="http://easwy.com/blog/wordpress/wp-posturl/" onclick="_gaq.push(['_trackEvent', 'outbound-article', 'http://easwy.com/blog/wordpress/wp-posturl/', 'wp-posturl plugin']);"   style="color: #8888FF; text-decoration: underline;">wp-posturl plugin</a> for wordpress.</p>
</div>
<div class='yarpp-related'>
<p>Related posts:</p><ol>
<li><a href="http://blog.yufeng.info/archives/663" rel="bookmark" title="Erlang R14B 新增加参数 +swt 控制调度器的唤醒阀值">Erlang R14B 新增加参数 +swt 控制调度器的唤醒阀值 </a></li>
<li><a href="http://blog.yufeng.info/archives/2963" rel="bookmark" title="Erlang调度器的利用率调查">Erlang调度器的利用率调查 </a></li>
<li><a href="http://blog.yufeng.info/archives/2998" rel="bookmark" title="Erlang 网络密集型服务器的瓶颈和解决思路">Erlang 网络密集型服务器的瓶颈和解决思路 </a></li>
<li><a href="http://blog.yufeng.info/archives/3072" rel="bookmark" title="Erlang R17新特性浅评">Erlang R17新特性浅评 </a></li>
<li><a href="http://blog.yufeng.info/archives/319" rel="bookmark" title="lcnt 环境搭建">lcnt 环境搭建 </a></li>
</ol>
</div>
			<div class="fixed"></div>
		</div>
		<div class="under">
			<span class="categories">Categories: </span><span><a href="http://blog.yufeng.info/archives/category/erlang" rel="category tag">Erlang探索</a>, <a href="http://blog.yufeng.info/archives/category/%e6%ba%90%e7%a0%81%e5%88%86%e6%9e%90" rel="category tag">源码分析</a></span>			<span class="tags">Tags: </span><span><a href="http://blog.yufeng.info/archives/tag/sub" rel="tag">+sub</a>, <a href="http://blog.yufeng.info/archives/tag/scheduler-utilization" rel="tag">scheduler utilization</a></span>		</div>
	</div>

	<!-- related posts START -->
		<!-- related posts END -->

	<script type="text/javascript" src="http://blog.yufeng.info/wp-content/themes/inove/js/comment.js"></script>



<div id="comments">

<div id="cmtswitcher">
			<a id="commenttab" class="curtab" href="javascript:void(0);" onclick="MGJS.switchTab('thecomments,commentnavi', 'thetrackbacks', 'commenttab', 'curtab', 'trackbacktab', 'tab');">Comments (5)</a>
		<a id="trackbacktab" class="tab" href="javascript:void(0);" onclick="MGJS.switchTab('thetrackbacks', 'thecomments,commentnavi', 'trackbacktab', 'curtab', 'commenttab', 'tab');">Trackbacks (1)</a>
				<span class="addcomment"><a href="#respond">Leave a comment</a></span>
				<span class="addtrackback"><a href="http://blog.yufeng.info/archives/3149/trackback">Trackback</a></span>
		<div class="fixed"></div>
</div>

<div id="commentlist">
	<!-- comments START -->
	<ol id="thecomments">
		<li class="comment regularcomment" id="comment-28717">
		<div class="author">
			<div class="pic">
				<img alt='' src='http://0.gravatar.com/avatar/6b063c0cc564e6ea75d5c01915acf8b8?s=32&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&amp;r=G' class='avatar avatar-32 photo' height='32' width='32' />			</div>
			<div class="name">
									<a id="commentauthor-28717" class="url" href="http://weibo.com/bestxieliang" rel="external nofollow">
				
				Liang Xie
									</a>
							</div>
		</div>

		<div class="info">
			<div class="date">
				May 19th, 2014 at 10:35					 | <a href="#comment-28717">#1</a>
			</div>
			<div class="act">
				<a href="javascript:void(0);" onclick="MGJS_CMT.reply('commentauthor-28717', 'comment-28717', 'comment');">Reply</a> | 
				<a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-28717', 'comment-28717', 'commentbody-28717', 'comment');">Quote</a>
							</div>
			<div class="fixed"></div>
			<div class="content">
				
				<div id="commentbody-28717">
					<p>不明觉厉</p>
<p class="thdrpy">[<a href="javascript:void(0)" onclick="movecfm(event,28717,1,'Liang Xie');">Reply</a>]</p>				</div>
			</div>
		</div>
		<div class="fixed"></div>

</li><!-- #comment-## -->
	<li class="comment regularcomment" id="comment-30329">
		<div class="author">
			<div class="pic">
				<img alt='' src='http://0.gravatar.com/avatar/e70a156d15b17ed75ab828e52a248561?s=32&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&amp;r=G' class='avatar avatar-32 photo' height='32' width='32' />			</div>
			<div class="name">
									<span id="commentauthor-30329">
				
				xingang
									</span>
							</div>
		</div>

		<div class="info">
			<div class="date">
				June 4th, 2014 at 03:02					 | <a href="#comment-30329">#2</a>
			</div>
			<div class="act">
				<a href="javascript:void(0);" onclick="MGJS_CMT.reply('commentauthor-30329', 'comment-30329', 'comment');">Reply</a> | 
				<a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-30329', 'comment-30329', 'commentbody-30329', 'comment');">Quote</a>
							</div>
			<div class="fixed"></div>
			<div class="content">
				
				<div id="commentbody-30329">
					<p>图片是不是贴反了？ +sub true才是balance的啊。</p>
<p class="thdrpy">[<a href="javascript:void(0)" onclick="movecfm(event,30329,1,'xingang');">Reply</a>]</p><div class="comment-childs chalt" id="comment-30372"><img alt='' src='http://0.gravatar.com/avatar/2f3b92251d56989e1fdbe07eb6299160?s=32&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&amp;r=G' class='avatar avatar-32 photo' height='32' width='32' /><p><cite><a href='http://yufeng.info' rel='external nofollow' class='url'>Yu Feng</a></cite> Reply:<br /><small class="commentmetadata">June 4th, 2014 at 2:40 pm</small></p><p>反了，多谢指正！</p>
<p class="thdrpy">[<a href="javascript:void(0)" onclick="movecfm(event,30372,2,'Yu Feng');">Reply</a>]</p></div>				</div>
			</div>
		</div>
		<div class="fixed"></div>

</li><!-- #comment-## -->
	<li class="comment regularcomment" id="comment-30447">
		<div class="author">
			<div class="pic">
				<img alt='' src='http://0.gravatar.com/avatar/e70a156d15b17ed75ab828e52a248561?s=32&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&amp;r=G' class='avatar avatar-32 photo' height='32' width='32' />			</div>
			<div class="name">
									<span id="commentauthor-30447">
				
				xingang
									</span>
							</div>
		</div>

		<div class="info">
			<div class="date">
				June 5th, 2014 at 06:08					 | <a href="#comment-30447">#3</a>
			</div>
			<div class="act">
				<a href="javascript:void(0);" onclick="MGJS_CMT.reply('commentauthor-30447', 'comment-30447', 'comment');">Reply</a> | 
				<a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-30447', 'comment-30447', 'commentbody-30447', 'comment');">Quote</a>
							</div>
			<div class="fixed"></div>
			<div class="content">
				
				<div id="commentbody-30447">
					<p>请教您一个问题，supervisor:start_child是不是比spawn要慢很多？<br />
用start_child，每秒大概只能起几千个（串行），但是spawn能上百万。<br />
谢谢！</p>
<p class="thdrpy">[<a href="javascript:void(0)" onclick="movecfm(event,30447,1,'xingang');">Reply</a>]</p><div class="comment-childs chalt" id="comment-30713"><img alt='' src='http://0.gravatar.com/avatar/2f3b92251d56989e1fdbe07eb6299160?s=32&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&amp;r=G' class='avatar avatar-32 photo' height='32' width='32' /><p><cite><a href='http://yufeng.info' rel='external nofollow' class='url'>Yu Feng</a></cite> Reply:<br /><small class="commentmetadata">June 7th, 2014 at 12:57 pm</small></p><p>supervisor:start_child 除了spawn以外要做很多管理工作，效率当然低，一般用于生命周期很长的进程的创建</p>
<p class="thdrpy">[<a href="javascript:void(0)" onclick="movecfm(event,30713,2,'Yu Feng');">Reply</a>]</p></div>				</div>
			</div>
		</div>
		<div class="fixed"></div>

</li><!-- #comment-## -->
	<li class="comment regularcomment" id="comment-40155">
		<div class="author">
			<div class="pic">
				<img alt='' src='http://0.gravatar.com/avatar/e770a8cd578094bfa2a1cb1c06d48580?s=32&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&amp;r=G' class='avatar avatar-32 photo' height='32' width='32' />			</div>
			<div class="name">
									<span id="commentauthor-40155">
				
				liuwei
									</span>
							</div>
		</div>

		<div class="info">
			<div class="date">
				September 2nd, 2014 at 08:07					 | <a href="#comment-40155">#4</a>
			</div>
			<div class="act">
				<a href="javascript:void(0);" onclick="MGJS_CMT.reply('commentauthor-40155', 'comment-40155', 'comment');">Reply</a> | 
				<a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-40155', 'comment-40155', 'commentbody-40155', 'comment');">Quote</a>
							</div>
			<div class="fixed"></div>
			<div class="content">
				
				<div id="commentbody-40155">
					<p>能详细讲一下+sub的调度策略吗？</p>
<p class="thdrpy">[<a href="javascript:void(0)" onclick="movecfm(event,40155,1,'liuwei');">Reply</a>]</p>				</div>
			</div>
		</div>
		<div class="fixed"></div>

</li><!-- #comment-## -->
	<li class="comment regularcomment" id="comment-42078">
		<div class="author">
			<div class="pic">
				<img alt='' src='http://1.gravatar.com/avatar/90c9a8fbe6bbcb42977fe2889de06650?s=32&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&amp;r=G' class='avatar avatar-32 photo' height='32' width='32' />			</div>
			<div class="name">
									<span id="commentauthor-42078">
				
				hejavac
									</span>
							</div>
		</div>

		<div class="info">
			<div class="date">
				September 17th, 2014 at 20:42					 | <a href="#comment-42078">#5</a>
			</div>
			<div class="act">
				<a href="javascript:void(0);" onclick="MGJS_CMT.reply('commentauthor-42078', 'comment-42078', 'comment');">Reply</a> | 
				<a href="javascript:void(0);" onclick="MGJS_CMT.quote('commentauthor-42078', 'comment-42078', 'commentbody-42078', 'comment');">Quote</a>
							</div>
			<div class="fixed"></div>
			<div class="content">
				
				<div id="commentbody-42078">
					<p>rpc:call 是并发的么，有消息队列么？<br />
两个进程A、B先后rpc:call(公共节点,&#8230;)，然后是先处理A的rpc:call并返回，再处理B的rpc:call么？<br />
我根据下面的源码的理解，A、B的rpc:call是按先后来处理的，处理完A，再处理B。<br />
do_call(Node, Request, Timeout) -&gt;<br />
    Tag = make_ref(),<br />
    {Receiver,Mref} =<br />
	erlang:spawn_monitor(<br />
	  fun() -&gt;<br />
		  %% Middleman process. Should be unsensitive to regular<br />
		  %% exit signals.<br />
		  process_flag(trap_exit, true),<br />
		  Result = gen_server:call({?NAME,Node}, Request, Timeout),<br />
		  exit({self(),Tag,Result})<br />
	  end),<br />
    receive<br />
	{&#8216;DOWN&#8217;,Mref,_,_,{Receiver,Tag,Result}} -&gt;<br />
	    rpc_check(Result);<br />
	{&#8216;DOWN&#8217;,Mref,_,_,Reason} -&gt;<br />
	    %% The middleman code failed. Or someone did<br />
	    %% exit(_, kill) on the middleman process =&gt; Reason==killed<br />
	    rpc_check_t({&#8216;EXIT&#8217;,Reason})<br />
    end.</p>
<p class="thdrpy">[<a href="javascript:void(0)" onclick="movecfm(event,42078,1,'hejavac');">Reply</a>]</p><div class="comment-childs chalt" id="comment-42138"><img alt='' src='http://0.gravatar.com/avatar/2f3b92251d56989e1fdbe07eb6299160?s=32&amp;d=http%3A%2F%2F0.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&amp;r=G' class='avatar avatar-32 photo' height='32' width='32' /><p><cite><a href='http://yufeng.info' rel='external nofollow' class='url'>Yu Feng</a></cite> Reply:<br /><small class="commentmetadata">September 18th, 2014 at 10:37 am</small></p><p>rpc进程是按照先来后到的顺序来处理的，每个请求开一个进程处理，这样需要监控rpc开的进程总的个数，如果阻塞的话，系统很快就会崩溃。</p>
<p class="thdrpy">[<a href="javascript:void(0)" onclick="movecfm(event,42138,2,'Yu Feng');">Reply</a>]</p><div class="comment-childs" id="comment-42142"><img alt='' src='http://1.gravatar.com/avatar/90c9a8fbe6bbcb42977fe2889de06650?s=32&amp;d=http%3A%2F%2F1.gravatar.com%2Favatar%2Fad516503a11cd5ca435acc9bb6523536%3Fs%3D32&amp;r=G' class='avatar avatar-32 photo' height='32' width='32' /><p><cite>hejavac</cite> Reply:<br /><small class="commentmetadata">September 18th, 2014 at 11:15 am</small></p><p>恩恩，看了你的评论，我再看代码，现在终于明白了，谢谢啦。</p>
<p>这里真奇妙，平时handle_call都是{reply,&#8230;}阻塞返回的，我就理所当然是会阻塞返回，想想这样做法就会使系统奔溃，所以我就觉得应该有其他的机制来保证不阻塞，但是想不透怎么回事，现在明白了，自己还是不仔细啊~</p>
<p>rpc.erl<br />
（1）<br />
handle_call({call, Mod, Fun, Args, Gleader}, To, S) -&gt;<br />
    handle_call_call(Mod, Fun, Args, Gleader, To, S);<br />
（2）<br />
handle_call_call(Mod, Fun, Args, Gleader, To, S) -&gt;<br />
    RpcServer = self(),<br />
    %% Spawn not to block the rpc server.<br />
    {Caller,_} =<br />
	erlang:spawn_monitor(<br />
	  fun () -&gt;<br />
		  set_group_leader(Gleader),<br />
		  Reply =<br />
		      %% in case some sucker rex&#8217;es<br />
		      %% something that throws<br />
		      case catch apply(Mod, Fun, Args) of<br />
			  {&#8216;EXIT&#8217;, _} = Exit -&gt;<br />
			      {badrpc, Exit};<br />
			  Result -&gt;<br />
			      Result<br />
		      end,<br />
		  RpcServer ! {self(), {reply, Reply}}<br />
	  end),<br />
    {noreply, gb_trees:insert(Caller, To, S)}.</p>
<p class="thdrpy">[<a href="javascript:void(0)" onclick="movecfm(event,42142,3,'hejavac');">Reply</a>]</p></div></div>				</div>
			</div>
		</div>
		<div class="fixed"></div>

</li><!-- #comment-## -->
	</ol>
	<!-- comments END -->


	<!-- trackbacks START -->
			<ol id="thetrackbacks">
												<li class="trackback">
						<div class="date">
							May 18th, 2014 at 20:59							 | <a href="#comment-28662">#1</a>
						</div>
						<div class="act">
													</div>
						<div class="fixed"></div>
						<div class="title">
							<a href="http://blog.yufeng.info/archives/3072">
								Erlang R17新特性浅评 | 系统技术非业余研究							</a>
						</div>
					</li>
				
					</ol>
		<div class="fixed"></div>
	<!-- trackbacks END -->
</div>

</div>

	<form action="http://blog.yufeng.info/wp-comments-post.php" method="post" id="commentform">
	<div id="respond">

					
			<div id="author_info">
				<div class="row">
					<input type="text" name="author" id="author" class="textfield" value="" size="24" tabindex="1" />
					<label for="author" class="small">Name (required)</label>
				</div>
				<div class="row">
					<input type="text" name="email" id="email" class="textfield" value="" size="24" tabindex="2" />
					<label for="email" class="small">E-Mail (will not be published) (required)</label>
				</div>
				<div class="row">
					<input type="text" name="url" id="url" class="textfield" value="" size="24" tabindex="3" />
					<label for="url" class="small">Website</label>
				</div>
			</div>

			
		
		<!-- comment input -->
		<div class="row">
			<textarea name="comment" id="comment" tabindex="4" rows="8" cols="50"></textarea>
		</div>

		<!-- comment submit and rss -->
		<div id="submitbox">
			<a class="feed" href="http://blog.yufeng.info/comments/feed">Subscribe to comments feed</a>
			<div class="submitbutton">
				<input name="submit" type="submit" id="submit" class="button" tabindex="5" value="Submit Comment" />
			</div>
						<input type="hidden" name="comment_post_ID" value="3149" />
			<div class="fixed"></div>
		</div>

	</div>
	<p style="display: none;"><input type="hidden" id="akismet_comment_nonce" name="akismet_comment_nonce" value="71e73dc870" /></p><p class="comment-subscription-form"><input type="checkbox" name="subscribe_comments" id="subscribe_comments" value="subscribe" style="width: auto; -moz-appearance: checkbox; -webkit-appearance: checkbox;" /> <label class="subscribe-label" id="subscribe-label" for="subscribe_comments">Notify me of follow-up comments by email.</label></p><p class="comment-subscription-form"><input type="checkbox" name="subscribe_blog" id="subscribe_blog" value="subscribe" style="width: auto; -moz-appearance: checkbox; -webkit-appearance: checkbox;" /> <label class="subscribe-label" id="subscribe-blog-label" for="subscribe_blog">Notify me of new posts by email.</label></p><p style="display: none;"><input type="hidden" id="ak_js" name="ak_js" value="27"/></p><p><input type="hidden" id="comment_reply_ID" name="comment_reply_ID" value="0" /><input type="hidden" id="comment_reply_dp" name="comment_reply_dp" value="0" /></p><div id="cancel_reply" style="display:none;"><a href="javascript:void(0)" onclick="movecfm(null,0,1,null);" style="color:red;">Click to cancel reply</a></div><script type="text/javascript">
/* <![CDATA[ */
var commentformid = "commentform";
var USERINFO = false;
var atreply = "none";
/* ]]> */
</script>
<script type="text/javascript" src="http://blog.yufeng.info/wp-content/plugins/wordpress-thread-comment/wp-thread-comment.js.php?jsver=common"></script>
	</form>

			<script type="text/javascript">MGJS.loadCommentShortcut();</script>
	

	<div id="postnavi">
		<span class="prev"></span>
		<span class="next"><a href="http://blog.yufeng.info/archives/3133" rel="prev">Erlang内存体系调优</a></span>
		<div class="fixed"></div>
	</div>


	</div>
	<!-- main END -->

	
<!-- sidebar START -->
<div id="sidebar">

<!-- sidebar north START -->
<div id="northsidebar" class="sidebar">

	<!-- feeds -->
	<div class="widget widget_feeds">
		<div class="content">
			<div id="subscribe">
				<a rel="external nofollow" id="feedrss" title="Subscribe to this blog..." href="http://blog.yufeng.info/feed"><abbr title="Really Simple Syndication">RSS</abbr></a>
									<ul id="feed_readers">
						<li id="google_reader"><a rel="external nofollow" class="reader" title="Subscribe with Google" href="http://fusion.google.com/add?feedurl=http://blog.yufeng.info/feed"><span>Google</span></a></li>
						<li id="youdao_reader"><a rel="external nofollow" class="reader" title="Subscribe with Youdao" href="http://reader.youdao.com/#url=http://blog.yufeng.info/feed"><span>Youdao</span></a></li>
						<li id="xianguo_reader"><a rel="external nofollow" class="reader" title="Subscribe with Xian Guo" href="http://www.xianguo.com/subscribe.php?url=http://blog.yufeng.info/feed"><span>Xian Guo</span></a></li>
						<li id="zhuaxia_reader"><a rel="external nofollow" class="reader" title="Subscribe with Zhua Xia" href="http://www.zhuaxia.com/add_channel.php?url=http://blog.yufeng.info/feed"><span>Zhua Xia</span></a></li>
						<li id="yahoo_reader"><a rel="external nofollow" class="reader" title="Subscribe with My Yahoo!"	href="http://add.my.yahoo.com/rss?url=http://blog.yufeng.info/feed"><span>My Yahoo!</span></a></li>
						<li id="newsgator_reader"><a rel="external nofollow" class="reader" title="Subscribe with newsgator"	href="http://www.newsgator.com/ngs/subscriber/subfext.aspx?url=http://blog.yufeng.info/feed"><span>newsgator</span></a></li>
						<li id="bloglines_reader"><a rel="external nofollow" class="reader" title="Subscribe with Bloglines"	href="http://www.bloglines.com/sub/http://blog.yufeng.info/feed"><span>Bloglines</span></a></li>
						<li id="inezha_reader"><a rel="external nofollow" class="reader" title="Subscribe with iNezha"	href="http://inezha.com/add?url=http://blog.yufeng.info/feed"><span>iNezha</span></a></li>
					</ul>
							</div>
							<a id="followme" title="Follow me!" href="http://twitter.com/eric33yu/">Twitter</a>
						<div class="fixed"></div>
		</div>
	</div>

	<!-- showcase -->
	
<div id="paypal_donations-3" class="widget widget_paypal_donations"><h3>buy me a coffee.</h3><!-- Begin PayPal Donations by http://johansteen.se/ -->

<form action="https://www.paypal.com/cgi-bin/webscr" method="post">
    <div class="paypal-donations">
        <input type="hidden" name="cmd" value="_donations" />
        <input type="hidden" name="business" value="mryufeng@gmail.com" />
        <input type="hidden" name="item_name" value="buy me a coffee." />
        <input type="hidden" name="item_number" value="yufeng" />
        <input type="hidden" name="amount" value="10" />
        <input type="hidden" name="currency_code" value="USD" />
        <input type="image" src="https://www.paypal.com/en_US/i/btn/btn_donate_LG.gif" name="submit" alt="PayPal - The safer, easier way to pay online." />
        <img alt="" src="https://www.paypal.com/en_US/i/scr/pixel.gif" width="1" height="1" />
    </div>
</form>
<!-- End PayPal Donations -->
</div><div id="text-3" class="widget widget_text"><h3>广告时间</h3>			<div class="textwidget"><p>阿里核心系统数据库组招募高手！</p>
</div>
		</div><div id="text-4" class="widget widget_text"><h3>工作机会</h3>			<div class="textwidget"><p>招聘信息：<a href="http://blog.yufeng.info/job" onclick="_gaq.push(['_trackEvent', 'outbound-widget-int', 'http://blog.yufeng.info/job', '猛点这里获得工作机会']);" >猛点这里获得工作机会</a>  </p>
</div>
		</div>		<div id="recent-posts-3" class="widget widget_recent_entries">		<h3>Recent Posts</h3>		<ul>
					<li>
				<a href="http://blog.yufeng.info/archives/3149">R17新的调度策略+sub</a>
						</li>
					<li>
				<a href="http://blog.yufeng.info/archives/3133">Erlang内存体系调优</a>
						</li>
					<li>
				<a href="http://blog.yufeng.info/archives/3130">Erlang公平调度的误解</a>
						</li>
					<li>
				<a href="http://blog.yufeng.info/archives/3118">Erlang内存分配器之mbcs_pool</a>
						</li>
					<li>
				<a href="http://blog.yufeng.info/archives/3104">基于LLVM的高性能Erlang(Hipe)尝鲜</a>
						</li>
				</ul>
		</div><div id="recent-comments-3" class="widget widget_recent_comments"><h3>Recent Comments</h3><ul id="recentcomments"><li class="recentcomments"><span class="comment-author-link"><a href='http://mcoder-003-site1.site4future.com/archives/9' rel='external nofollow' class='url'>TCP洪水攻击（SYN Flood）的诊断和处理 | 我的博客</a></span> on <a href="http://blog.yufeng.info/archives/1380/comment-page-1#comment-45198">老生常谈: ulimit问题及其影响</a></li><li class="recentcomments"><span class="comment-author-link"><a href='http://riccardotravels.wordpress.com/2014/04/23/cheap-holidays-with-h10-hotels-using-voucher-codes/' rel='external nofollow' class='url'>riccardotravels.wordpress.com</a></span> on <a href="http://blog.yufeng.info/archives/1768/comment-page-1#comment-44764">Flashcache使用的误区以及解决方案</a></li><li class="recentcomments"><span class="comment-author-link"><a href='http://yufeng.info' rel='external nofollow' class='url'>Yu Feng</a></span> on <a href="http://blog.yufeng.info/archives/1752/comment-page-1#comment-44520">Erlang如何限制节点对集群的访问之net_kernel:allow</a></li></ul></div></div>
<!-- sidebar north END -->

<div id="centersidebar">

	<!-- sidebar east START -->
	<div id="eastsidebar" class="sidebar">
	
		<!-- categories -->
		<div class="widget widget_categories">
			<h3>Categories</h3>
			<ul>
					<li class="cat-item cat-item-3"><a href="http://blog.yufeng.info/archives/category/erlang" title="探索erlang的方方面面">Erlang探索</a>
</li>
	<li class="cat-item cat-item-240"><a href="http://blog.yufeng.info/archives/category/linux_kb" >Linux</a>
</li>
	<li class="cat-item cat-item-481"><a href="http://blog.yufeng.info/archives/category/%e4%ba%86%e8%a7%a3%e7%b3%bb%e5%88%97" >了解系列</a>
</li>
	<li class="cat-item cat-item-480"><a href="http://blog.yufeng.info/archives/category/%e4%bd%93%e7%b3%bb%e7%bb%93%e6%9e%84" >体系结构</a>
</li>
	<li class="cat-item cat-item-152"><a href="http://blog.yufeng.info/archives/category/tools" >工具介绍</a>
</li>
	<li class="cat-item cat-item-374"><a href="http://blog.yufeng.info/archives/category/database" title="MySQL和其他KV数据库">数据库</a>
</li>
	<li class="cat-item cat-item-4"><a href="http://blog.yufeng.info/archives/category/misc" title="无法分类 乱七八糟的东西">杂七杂八</a>
</li>
	<li class="cat-item cat-item-290"><a href="http://blog.yufeng.info/archives/category/%e6%ba%90%e7%a0%81%e5%88%86%e6%9e%90" >源码分析</a>
</li>
	<li class="cat-item cat-item-46"><a href="http://blog.yufeng.info/archives/category/life" title="情感交流">生活</a>
</li>
	<li class="cat-item cat-item-1"><a href="http://blog.yufeng.info/archives/category/network" title="网络编程和工具">网络编程</a>
</li>
	<li class="cat-item cat-item-311"><a href="http://blog.yufeng.info/archives/category/%e8%b0%83%e4%bc%98" >调优</a>
</li>
			</ul>
		</div>

		</div>
	<!-- sidebar east END -->

	<!-- sidebar west START -->
	<div id="westsidebar" class="sidebar">
	
		<!-- blogroll -->
		<div class="widget widget_links">
			<h3>Blogroll</h3>
			<ul>
				<li><a href="http://www.bookandman.com/?from=yufeng" target="_blank">book and man</a></li>
<li><a href="http://www.cnerlang.com">erlang中文社区</a></li>
<li><a href="http://dinglin.javaeye.com/?from=yufeng">MySQL专家丁奇</a></li>
<li><a href="http://logn.me" title="nessdb">一工(BohuTANG)博客</a></li>
<li><a href="http://blog.coly.li/?from=yufeng" title="文件系统专家" target="_blank">伯松的blog</a></li>
<li><a href="http://gaoyusong.com/?from=yufeng">剑川个人博客</a></li>
<li><a href="http://zhuzhaoyuan.com/?from=yufeng" target="_blank">叔度博客(nginx专家)</a></li>
<li><a href="http://www.imagerabit.com/?from=yufeng">小天后的图像处理博客</a></li>
<li><a href="http://www.qingliangcn.com/?from=yufeng" target="_blank">庆亮的博客</a></li>
<li><a href="http://www.osforce.cn/?from=yufeng" title="开源力量">开源力量</a></li>
<li><a href="http://www.penglixun.com/?from=yufeng">彭爷MySQL研究博客</a></li>
<li><a href="http://mryufeng.javaeye.com?from=yufeng" title="javaeye上的" target="_blank">我的旧非业余研究</a></li>
<li><a href="http://donghao.org/?from=yufeng" title="内核和文件系统">斯巴达第二季</a></li>
<li><a href="http://www.nosqlnotes.net/?from=yufeng">日照分布式存储</a></li>
<li><a href="http://blog.lifeibo.com/?from=yufeng">李子非主流程序员</a></li>
<li><a href="http://ybbct.iteye.com/?from=yufeng">武藏个人博客</a></li>
<li><a href="http://nil-zhang.iteye.com/?from=yufeng">淘宝千石的博客</a></li>
<li><a href="http://mysql.taobao.org" title="维护淘宝的MySQL分支">淘宝数据库组</a></li>
<li><a href="http://csrd.aliapp.com/?from=yufeng" title="基础 极致 分享" target="_blank">淘宝核心系统博客</a></li>
<li><a href="http://abloz.com?from=yufeng">瀚海星空</a></li>
<li><a href="http://www.cnblogs.com/lispking/">点滴随笔(MySQL和集群相关)</a></li>
<li><a href="http://hidba.org/?from=yufeng" title="玄惭MySQL运维博客">玄惭MySQL运维博客</a></li>
<li><a href="http://wqtn22.iteye.com/?from=yufeng">皓庭Erlang开发博客</a></li>
<li><a href="http://i.mtime.com/844165">祁奚个人博客</a></li>
<li><a href="http://www.wangchi.info/?from=yufeng" title="音乐 电子 composer" target="_blank">老婆的交互式音乐</a></li>
<li><a href="http://www.orczhou.com/">苏普的MySQL故事博客</a></li>
<li><a href="http://www.hoterran.info/?from=yufeng" title="Erlang开发">运维和开发-hoterran</a></li>
<li><a href="http://www.alibabatech.org/?from=yufeng">阿里巴巴技术协会</a></li>
<li><a href="http://www.pagefault.info/?from=yufeng">雕梁nginx和内核</a></li>
<li><a href="http://blog.csdn.net/wudongxu?from=yufeng">项仲个人博客</a></li>
			</ul>
		</div>

		</div>
	<!-- sidebar west END -->
	<div class="fixed"></div>
</div>

<!-- sidebar south START -->
<div id="southsidebar" class="sidebar">

	<!-- archives -->
	<div class="widget">
		<h3>Archives</h3>
					<ul>
					<li><a href='http://blog.yufeng.info/archives/date/2014/05'>May 2014</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2014/04'>April 2014</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2014/03'>March 2014</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2014/02'>February 2014</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2014/01'>January 2014</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2013/12'>December 2013</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2013/11'>November 2013</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2013/10'>October 2013</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2013/08'>August 2013</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2013/07'>July 2013</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2013/06'>June 2013</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2013/05'>May 2013</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2013/04'>April 2013</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2013/03'>March 2013</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2013/02'>February 2013</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2013/01'>January 2013</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2012/12'>December 2012</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2012/10'>October 2012</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2012/09'>September 2012</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2012/08'>August 2012</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2012/07'>July 2012</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2012/06'>June 2012</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2012/05'>May 2012</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2012/04'>April 2012</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2012/03'>March 2012</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2012/02'>February 2012</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2012/01'>January 2012</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2011/12'>December 2011</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2011/11'>November 2011</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2011/10'>October 2011</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2011/09'>September 2011</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2011/07'>July 2011</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2011/06'>June 2011</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2011/05'>May 2011</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2011/04'>April 2011</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2011/03'>March 2011</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2011/02'>February 2011</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2011/01'>January 2011</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2010/12'>December 2010</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2010/11'>November 2010</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2010/10'>October 2010</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2010/09'>September 2010</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2010/08'>August 2010</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2010/07'>July 2010</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2010/06'>June 2010</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2010/05'>May 2010</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2010/04'>April 2010</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2010/03'>March 2010</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2010/02'>February 2010</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2010/01'>January 2010</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2009/11'>November 2009</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2009/10'>October 2009</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2009/09'>September 2009</a></li>
	<li><a href='http://blog.yufeng.info/archives/date/2009/08'>August 2009</a></li>
			</ul>
			</div>

	<!-- meta -->
	<div class="widget">
		<h3>Meta</h3>
		<ul>
						<li><a href="http://blog.yufeng.info/wp-login.php">Log in</a></li>
		</ul>
	</div>

</div>
<!-- sidebar south END -->

</div>
<!-- sidebar END -->
	<div class="fixed"></div>
</div>
<!-- content END -->

<!-- footer START -->
<div id="footer">
	<a id="gotop" href="#" onclick="MGJS.goTop();return false;">Top</a>
	<a id="powered" href="http://wordpress.org/">WordPress</a>
	<div id="copyright">
		Copyright &copy; 2009-2014 系统技术非业余研究	</div>
	<div id="themeinfo">
		Theme by <a href="http://www.neoease.com/">NeoEase</a>. Valid <a href="http://validator.w3.org/check?uri=referer">XHTML 1.1</a> and <a href="http://jigsaw.w3.org/css-validator/check/referer?profile=css3">CSS 3</a>.	</div>
</div>
<!-- footer END -->

</div>
<!-- container END -->
</div>
<!-- wrap END -->

	<div style="display:none">
	<div class="grofile-hash-map-6b063c0cc564e6ea75d5c01915acf8b8">
	</div>
	<div class="grofile-hash-map-e70a156d15b17ed75ab828e52a248561">
	</div>
	<div class="grofile-hash-map-2f3b92251d56989e1fdbe07eb6299160">
	</div>
	<div class="grofile-hash-map-e770a8cd578094bfa2a1cb1c06d48580">
	</div>
	<div class="grofile-hash-map-90c9a8fbe6bbcb42977fe2889de06650">
	</div>
	</div>
<script type='text/javascript' src='http://blog.yufeng.info/wp-content/plugins/akismet/_inc/form.js?ver=3.0.2'></script>
<script type='text/javascript' src='http://blog.yufeng.info/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/shCore.js?ver=2.1.364'></script>
<script type='text/javascript' src='http://blog.yufeng.info/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/shBrushBash.js?ver=2.1.364'></script>
<script type='text/javascript' src='http://blog.yufeng.info/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/shBrushErlang.js?ver=2.1.364'></script>
<script type='text/javascript'>
	(function(){
		var corecss = document.createElement('link');
		var themecss = document.createElement('link');
		var corecssurl = "http://blog.yufeng.info/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/styles/shCore.css?ver=2.1.364";
		if ( corecss.setAttribute ) {
				corecss.setAttribute( "rel", "stylesheet" );
				corecss.setAttribute( "type", "text/css" );
				corecss.setAttribute( "href", corecssurl );
		} else {
				corecss.rel = "stylesheet";
				corecss.href = corecssurl;
		}
		document.getElementsByTagName("head")[0].insertBefore( corecss, document.getElementById("syntaxhighlighteranchor") );
		var themecssurl = "http://blog.yufeng.info/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/styles/shThemeDefault.css?ver=2.1.364";
		if ( themecss.setAttribute ) {
				themecss.setAttribute( "rel", "stylesheet" );
				themecss.setAttribute( "type", "text/css" );
				themecss.setAttribute( "href", themecssurl );
		} else {
				themecss.rel = "stylesheet";
				themecss.href = themecssurl;
		}
		//document.getElementById("syntaxhighlighteranchor").appendChild(themecss);
		document.getElementsByTagName("head")[0].insertBefore( themecss, document.getElementById("syntaxhighlighteranchor") );
	})();
	SyntaxHighlighter.config.clipboardSwf = 'http://blog.yufeng.info/wp-content/plugins/syntaxhighlighter/syntaxhighlighter2/scripts/clipboard.swf';
	SyntaxHighlighter.config.strings.expandSource = 'show source';
	SyntaxHighlighter.config.strings.viewSource = 'view source';
	SyntaxHighlighter.config.strings.copyToClipboard = 'copy to clipboard';
	SyntaxHighlighter.config.strings.copyToClipboardConfirmation = 'The code is in your clipboard now';
	SyntaxHighlighter.config.strings.print = 'print';
	SyntaxHighlighter.config.strings.help = '?';
	SyntaxHighlighter.config.strings.alert = 'SyntaxHighlighter\n\n';
	SyntaxHighlighter.config.strings.noBrush = 'Can\'t find brush for: ';
	SyntaxHighlighter.config.strings.brushNotHtmlScript = 'Brush wasn\'t configured for html-script option: ';
	SyntaxHighlighter.defaults['gutter'] = false;
	SyntaxHighlighter.defaults['pad-line-numbers'] = true;
	SyntaxHighlighter.defaults['smart-tabs'] = false;
	SyntaxHighlighter.all();
</script>
<link rel='stylesheet' id='yarppRelatedCss-css'  href='http://blog.yufeng.info/wp-content/plugins/yet-another-related-posts-plugin/style/related.css?ver=4.0' type='text/css' media='all' />
<script type='text/javascript' src='http://s0.wp.com/wp-content/js/devicepx-jetpack.js?ver=201444'></script>
<script type='text/javascript' src='http://s.gravatar.com/js/gprofiles.js?ver=2014Octaa'></script>
<script type='text/javascript'>
/* <![CDATA[ */
var WPGroHo = {"my_hash":""};
/* ]]> */
</script>
<script type='text/javascript' src='http://blog.yufeng.info/wp-content/plugins/jetpack/modules/wpgroho.js?ver=4.0'></script>

	<script src="http://stats.wp.com/e-201444.js" type="text/javascript"></script>
	<script type="text/javascript">
	st_go({v:'ext',j:'1:3.1.1',blog:'21500275',post:'3149',tz:'8'});
	var load_cmc = function(){linktracker_init(21500275,3149,2);};
	if ( typeof addLoadEvent != 'undefined' ) addLoadEvent(load_cmc);
	else load_cmc();
	</script>
</body>
</html>

